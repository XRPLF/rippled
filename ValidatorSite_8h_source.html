<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rippled: ValidatorSite.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rippled
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_df9c78dcf3f59a33b12284f95992a64b.html">ripple</a></li><li class="navelem"><a class="el" href="dir_9f69212e4c6e2ca9ec5ab59cd7b6275c.html">app</a></li><li class="navelem"><a class="el" href="dir_29f79f6f29a0be0eebc6c46bea51c866.html">misc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ValidatorSite.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">    This file is part of rippled: https://github.com/ripple/rippled</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">    Copyright (c) 2016 Ripple Labs Inc.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">    Permission to use, copy, modify, and/or distribute this software for any</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">    purpose  with  or without fee is hereby granted, provided that the above</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">    copyright notice and this permission notice appear in all copies.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">    THE  SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">    WITH  REGARD  TO  THIS  SOFTWARE  INCLUDING  ALL  IMPLIED  WARRANTIES  OF</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    MERCHANTABILITY  AND  FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">    ANY  SPECIAL ,  DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">    WHATSOEVER  RESULTING  FROM  LOSS  OF USE, DATA OR PROFITS, WHETHER IN AN</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    ACTION  OF  CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">    OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//==============================================================================</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifndef RIPPLE_APP_MISC_VALIDATORSITE_H_INCLUDED</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#define RIPPLE_APP_MISC_VALIDATORSITE_H_INCLUDED</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;ripple/app/misc/ValidatorList.h&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;ripple/app/misc/detail/Work.h&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;ripple/app/main/Application.h&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;ripple/basics/Log.h&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;ripple/basics/StringUtilities.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;ripple/core/Config.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;ripple/json/json_value.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;boost/asio.hpp&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;boost/optional.hpp&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;<a class="codeRef" href="http://en.cppreference.com/w/cpp/header/mutex.html">mutex</a>&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;<a class="codeRef" href="http://en.cppreference.com/w/cpp/header/memory.html">memory</a>&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceripple.html">ripple</a> {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html">   67</a></span>&#160;<span class="keyword">class </span><a class="code" href="classripple_1_1ValidatorSite.html">ValidatorSite</a></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;{</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#a13d17a86ad8d1ecdf3e4d2b99c51c03c">   69</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classripple_1_1ValidatorSite.html#a13d17a86ad8d1ecdf3e4d2b99c51c03c">Work</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#accb524d6aaf2c9b2e4f11b2a2e618292">   72</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="classripple_1_1ValidatorSite.html#accb524d6aaf2c9b2e4f11b2a2e618292">error_code</a> = boost::system::error_code;</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#a6c7e52a614599ac141ce93f78d0c06c7">   73</a></span>&#160;    <span class="keyword">using</span> <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/system_clock.html">clock_type</a> = <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/system_clock.html">std::chrono::system_clock</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site.html">   75</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structripple_1_1ValidatorSite_1_1Site.html">Site</a></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    {</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site_1_1Status.html">   77</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="structripple_1_1ValidatorSite_1_1Site_1_1Status.html">Status</a></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        {</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site_1_1Status.html#a051a2a912896e81b91346204942255fe">   79</a></span>&#160;            clock_type::time_point <a class="code" href="structripple_1_1ValidatorSite_1_1Site_1_1Status.html#a051a2a912896e81b91346204942255fe">refreshed</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site_1_1Status.html#ac30a88227005185ee3ce1e3ce8efa687">   80</a></span>&#160;            <a class="code" href="namespaceripple.html#a6eaff79c38106bc3b27326d878c902d3">ListDisposition</a> <a class="code" href="structripple_1_1ValidatorSite_1_1Site_1_1Status.html#ac30a88227005185ee3ce1e3ce8efa687">disposition</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site_1_1Status.html#a8a4c75f97ab028a61b0234965200e247">   81</a></span>&#160;            <a class="codeRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> <a class="code" href="structripple_1_1ValidatorSite_1_1Site_1_1Status.html#a8a4c75f97ab028a61b0234965200e247">message</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        };</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site_1_1Resource.html">   84</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="structripple_1_1ValidatorSite_1_1Site_1_1Resource.html">Resource</a></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="keyword">explicit</span> <a class="code" href="structripple_1_1ValidatorSite_1_1Site_1_1Resource.html#afe65f03ab908c1d1f997143c38a18333">Resource</a>(<a class="codeRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> uri_);</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site_1_1Resource.html#af68a8e4b3c397c9d2a1a8602c1821528">   87</a></span>&#160;            <span class="keyword">const</span> <a class="codeRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> <a class="code" href="structripple_1_1ValidatorSite_1_1Site_1_1Resource.html#af68a8e4b3c397c9d2a1a8602c1821528">uri</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site_1_1Resource.html#a618535bf08e7b386d6be2200d890a972">   88</a></span>&#160;            <a class="code" href="structripple_1_1parsedURL.html">parsedURL</a> <a class="code" href="structripple_1_1ValidatorSite_1_1Site_1_1Resource.html#a618535bf08e7b386d6be2200d890a972">pUrl</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        };</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keyword">explicit</span> <a class="code" href="structripple_1_1ValidatorSite_1_1Site.html#a5ac58b976d710e8c7748e522ca680aa7">Site</a>(<a class="codeRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> uri);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site.html#a092ee2780769bf0db0beccebf6b0d431">   94</a></span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Resource&gt;</a> <a class="code" href="structripple_1_1ValidatorSite_1_1Site.html#a092ee2780769bf0db0beccebf6b0d431">loadedResource</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site.html#a0ade9d2f585b28bce6be5c9b9cea8836">   99</a></span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Resource&gt;</a> <a class="code" href="structripple_1_1ValidatorSite_1_1Site.html#a0ade9d2f585b28bce6be5c9b9cea8836">startingResource</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site.html#aa44e856f21ef00d4d14401f1212930a9">  104</a></span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Resource&gt;</a> <a class="code" href="structripple_1_1ValidatorSite_1_1Site.html#aa44e856f21ef00d4d14401f1212930a9">activeResource</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site.html#aa4105c913e2286bf65cec69a77a9a191">  106</a></span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structripple_1_1ValidatorSite_1_1Site.html#aa4105c913e2286bf65cec69a77a9a191">redirCount</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site.html#a9ad8dccf45a8752422df47c9cfbcf484">  107</a></span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/duration.html">std::chrono::minutes</a> <a class="code" href="structripple_1_1ValidatorSite_1_1Site.html#a9ad8dccf45a8752422df47c9cfbcf484">refreshInterval</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site.html#acd8891a9a8eab080a9991dba2cebff43">  108</a></span>&#160;        clock_type::time_point <a class="code" href="structripple_1_1ValidatorSite_1_1Site.html#acd8891a9a8eab080a9991dba2cebff43">nextRefresh</a>;</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="structripple_1_1ValidatorSite_1_1Site.html#a0ad7c73e51df5a42e52a2d22b0d04ff0">  109</a></span>&#160;        boost::optional&lt;Status&gt; <a class="code" href="structripple_1_1ValidatorSite_1_1Site.html#a0ad7c73e51df5a42e52a2d22b0d04ff0">lastRefreshStatus</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    };</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#ac9fbfd6284b1908abb5c133b19f4df8a">  112</a></span>&#160;    <a class="code" href="classripple_1_1Application.html">Application</a>&amp; <a class="code" href="classripple_1_1ValidatorSite.html#ac9fbfd6284b1908abb5c133b19f4df8a">app_</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#ae15d45ff053a79317feb96a72931ff18">  113</a></span>&#160;    <a class="code" href="classbeast_1_1Journal.html">beast::Journal</a> <span class="keyword">const</span> <a class="code" href="classripple_1_1ValidatorSite.html#ae15d45ff053a79317feb96a72931ff18">j_</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#a4531ee7ec60be0e673eb38fab1c4de37">  115</a></span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/thread/mutex.html">std::mutex</a> <span class="keyword">mutable</span> <a class="code" href="classripple_1_1ValidatorSite.html#a4531ee7ec60be0e673eb38fab1c4de37">sites_mutex_</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#ad83fa93cbdbf3c4d7535a750cb21015d">  116</a></span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/thread/mutex.html">std::mutex</a> <span class="keyword">mutable</span> <a class="code" href="classripple_1_1ValidatorSite.html#ad83fa93cbdbf3c4d7535a750cb21015d">state_mutex_</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#a0b6c467cf0ab7b9da438dcb9fcefa849">  118</a></span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/thread/condition_variable.html">std::condition_variable</a> <a class="code" href="classripple_1_1ValidatorSite.html#a0b6c467cf0ab7b9da438dcb9fcefa849">cv_</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#a4c305dcf439010942703b820129c38bd">  119</a></span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/weak_ptr.html">std::weak_ptr&lt;detail::Work&gt;</a> <a class="code" href="classripple_1_1ValidatorSite.html#a4c305dcf439010942703b820129c38bd">work_</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#ad21cf8f85e2e0d93dd36f14f752091c2">  120</a></span>&#160;    boost::asio::basic_waitable_timer&lt;clock_type&gt; <a class="code" href="classripple_1_1ValidatorSite.html#ad21cf8f85e2e0d93dd36f14f752091c2">timer_</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">// A list is currently being fetched from a site</span></div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#af9fef79ce80c89503aa59a9d4477baa1">  123</a></span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/atomic/atomic.html">std::atomic&lt;bool&gt;</a> <a class="code" href="classripple_1_1ValidatorSite.html#af9fef79ce80c89503aa59a9d4477baa1">fetching_</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// One or more lists are due to be fetched</span></div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#acb695da845a4ea5cd8e9a04032896a47">  126</a></span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/atomic/atomic.html">std::atomic&lt;bool&gt;</a> <a class="code" href="classripple_1_1ValidatorSite.html#acb695da845a4ea5cd8e9a04032896a47">pending_</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#a65d08f2fd201e3996243118d9008b3a9">  127</a></span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/atomic/atomic.html">std::atomic&lt;bool&gt;</a> <a class="code" href="classripple_1_1ValidatorSite.html#a65d08f2fd201e3996243118d9008b3a9">stopping_</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// The configured list of URIs for fetching lists</span></div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#a23da2191bf3778f552d18b7c9baf339c">  130</a></span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;Site&gt;</a> <a class="code" href="classripple_1_1ValidatorSite.html#a23da2191bf3778f552d18b7c9baf339c">sites_</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// time to allow for requests to complete</span></div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classripple_1_1ValidatorSite.html#aeb939e5b36be96e4bac8a590a8700850">  133</a></span>&#160;    <span class="keyword">const</span> <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/duration.html">std::chrono::seconds</a> <a class="code" href="classripple_1_1ValidatorSite.html#aeb939e5b36be96e4bac8a590a8700850">requestTimeout_</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#af0befe58e9ce7f51503d1362fa9bc486">ValidatorSite</a> (</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="classripple_1_1Application.html">Application</a>&amp; app,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        boost::optional&lt;beast::Journal&gt; j = boost::none,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/duration.html">std::chrono::seconds</a> timeout = <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/duration.html">std::chrono::seconds</a>{20});</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#ac88169a7bd5065dd8eb3a1c30bee0cea">~ValidatorSite</a> ();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#a48455b1eafd136de8b62538194ea9702">load</a> (</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;std::string&gt;</a> <span class="keyword">const</span>&amp; siteURIs);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#a032e94a043c94549a1ef8f74fd6b9d7e">start</a> ();</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#a6a943ee7c2eb6885495bed7368b18350">join</a> ();</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#a2d0e4bb64aeb47bc4b3b9ad1eba3201c">stop</a> ();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="classJson_1_1Value.html">Json::Value</a></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#a312f364fbd7a199243881139578c9ac7">getJson</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#a60e997403b0b276194f449fcd8da2eb8">setTimer</a> (<a class="codeRef" href="http://en.cppreference.com/w/cpp/thread/lock_guard.html">std::lock_guard&lt;std::mutex&gt;</a>&amp;);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#a97751fa3c9dad7c82c9567e0044dd566">onRequestTimeout</a> (</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> siteIdx,</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <a class="code" href="classripple_1_1ValidatorSite.html#accb524d6aaf2c9b2e4f11b2a2e618292">error_code</a> <span class="keyword">const</span>&amp; ec);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#ad71f44be0f749d7fe519f9fe4d076fbd">onTimer</a> (</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> siteIdx,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="classripple_1_1ValidatorSite.html#accb524d6aaf2c9b2e4f11b2a2e618292">error_code</a> <span class="keyword">const</span>&amp; ec);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#ab4cf0db6fe95ffba146223c1afb6a1ef">onSiteFetch</a> (</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        boost::system::error_code <span class="keyword">const</span>&amp; ec,</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <a class="code" href="namespaceripple_1_1detail.html#aeb2a1b7b18c8dd127461be172a910a66">detail::response_type</a>&amp;&amp; res,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> siteIdx);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#a4b504b4aa14b42ae424d4195391748c1">onTextFetch</a>(</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        boost::system::error_code <span class="keyword">const</span>&amp; ec,</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> <span class="keyword">const</span>&amp; res,</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> siteIdx);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#aad0d54021d12211a070eb6e2908d5607">makeRequest</a> (</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Site::Resource&gt;</a> resource,</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> siteIdx,</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/thread/lock_guard.html">std::lock_guard&lt;std::mutex&gt;</a>&amp; lock);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#a0998c84194888eef2571ece8ae120f28">parseJsonResponse</a> (</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> <span class="keyword">const</span>&amp; res,</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> siteIdx,</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/thread/lock_guard.html">std::lock_guard&lt;std::mutex&gt;</a>&amp; lock);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Site::Resource&gt;</a></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#adae4f6fd92ed2b54e6dc780f56e57320">processRedirect</a> (</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <a class="code" href="namespaceripple_1_1detail.html#aeb2a1b7b18c8dd127461be172a910a66">detail::response_type</a>&amp; res,</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a> siteIdx,</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/thread/lock_guard.html">std::lock_guard&lt;std::mutex&gt;</a>&amp; lock);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="classripple_1_1ValidatorSite.html#aae5e48f0c7cf0614f7987d943499a2e1">missingSite</a>();</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;};</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;} <span class="comment">// ripple</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="preprocessor">#endif</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="asystem_clock_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/chrono/system_clock.html">std::chrono::system_clock</a></div></div>
<div class="ttc" id="aclassripple_1_1Application_html"><div class="ttname"><a href="classripple_1_1Application.html">ripple::Application</a></div><div class="ttdef"><b>Definition:</b> <a href="Application_8h_source.html#l00085">Application.h:85</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_html_a0ad7c73e51df5a42e52a2d22b0d04ff0"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site.html#a0ad7c73e51df5a42e52a2d22b0d04ff0">ripple::ValidatorSite::Site::lastRefreshStatus</a></div><div class="ttdeci">boost::optional&lt; Status &gt; lastRefreshStatus</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00109">ValidatorSite.h:109</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_html"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site.html">ripple::ValidatorSite::Site</a></div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00075">ValidatorSite.h:75</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_html_a9ad8dccf45a8752422df47c9cfbcf484"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site.html#a9ad8dccf45a8752422df47c9cfbcf484">ripple::ValidatorSite::Site::refreshInterval</a></div><div class="ttdeci">std::chrono::minutes refreshInterval</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00107">ValidatorSite.h:107</a></div></div>
<div class="ttc" id="abasic_string_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a></div><div class="ttdoc">STL class.</div></div>
<div class="ttc" id="ashared_ptr_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr</a></div><div class="ttdoc">STL class.</div></div>
<div class="ttc" id="anamespaceripple_html_a6eaff79c38106bc3b27326d878c902d3"><div class="ttname"><a href="namespaceripple.html#a6eaff79c38106bc3b27326d878c902d3">ripple::ListDisposition</a></div><div class="ttdeci">ListDisposition</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorList_8h_source.html#l00042">ValidatorList.h:42</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_ad21cf8f85e2e0d93dd36f14f752091c2"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#ad21cf8f85e2e0d93dd36f14f752091c2">ripple::ValidatorSite::timer_</a></div><div class="ttdeci">boost::asio::basic_waitable_timer&lt; clock_type &gt; timer_</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00120">ValidatorSite.h:120</a></div></div>
<div class="ttc" id="astructripple_1_1parsedURL_html"><div class="ttname"><a href="structripple_1_1parsedURL.html">ripple::parsedURL</a></div><div class="ttdef"><b>Definition:</b> <a href="StringUtilities_8h_source.html#l00122">StringUtilities.h:122</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_ab4cf0db6fe95ffba146223c1afb6a1ef"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#ab4cf0db6fe95ffba146223c1afb6a1ef">ripple::ValidatorSite::onSiteFetch</a></div><div class="ttdeci">void onSiteFetch(boost::system::error_code const &amp;ec, detail::response_type &amp;&amp;res, std::size_t siteIdx)</div><div class="ttdoc">Store latest list fetched from site.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00513">ValidatorSite.cpp:513</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html"><div class="ttname"><a href="classripple_1_1ValidatorSite.html">ripple::ValidatorSite</a></div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00067">ValidatorSite.h:67</a></div></div>
<div class="ttc" id="avector_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector</a></div><div class="ttdoc">STL class.</div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a2d0e4bb64aeb47bc4b3b9ad1eba3201c"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a2d0e4bb64aeb47bc4b3b9ad1eba3201c">ripple::ValidatorSite::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdoc">Stop fetching lists from sites.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00179">ValidatorSite.cpp:179</a></div></div>
<div class="ttc" id="aduration_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/chrono/duration.html">std::chrono::minutes</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a97751fa3c9dad7c82c9567e0044dd566"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a97751fa3c9dad7c82c9567e0044dd566">ripple::ValidatorSite::onRequestTimeout</a></div><div class="ttdeci">void onRequestTimeout(std::size_t siteIdx, error_code const &amp;ec)</div><div class="ttdoc">request took too long</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00312">ValidatorSite.cpp:312</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_1_1Resource_html_af68a8e4b3c397c9d2a1a8602c1821528"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site_1_1Resource.html#af68a8e4b3c397c9d2a1a8602c1821528">ripple::ValidatorSite::Site::Resource::uri</a></div><div class="ttdeci">const std::string uri</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00087">ValidatorSite.h:87</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a4c305dcf439010942703b820129c38bd"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a4c305dcf439010942703b820129c38bd">ripple::ValidatorSite::work_</a></div><div class="ttdeci">std::weak_ptr&lt; detail::Work &gt; work_</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00119">ValidatorSite.h:119</a></div></div>
<div class="ttc" id="alock_guard_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/thread/lock_guard.html">std::lock_guard</a></div><div class="ttdoc">STL class.</div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_adae4f6fd92ed2b54e6dc780f56e57320"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#adae4f6fd92ed2b54e6dc780f56e57320">ripple::ValidatorSite::processRedirect</a></div><div class="ttdeci">std::shared_ptr&lt; Site::Resource &gt; processRedirect(detail::response_type &amp;res, std::size_t siteIdx, std::lock_guard&lt; std::mutex &gt; &amp;lock)</div><div class="ttdoc">Interpret a redirect response.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00463">ValidatorSite.cpp:463</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_ad83fa93cbdbf3c4d7535a750cb21015d"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#ad83fa93cbdbf3c4d7535a750cb21015d">ripple::ValidatorSite::state_mutex_</a></div><div class="ttdeci">std::mutex state_mutex_</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00116">ValidatorSite.h:116</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a13d17a86ad8d1ecdf3e4d2b99c51c03c"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a13d17a86ad8d1ecdf3e4d2b99c51c03c">ripple::ValidatorSite::Work</a></div><div class="ttdeci">friend class Work</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00069">ValidatorSite.h:69</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_af9fef79ce80c89503aa59a9d4477baa1"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#af9fef79ce80c89503aa59a9d4477baa1">ripple::ValidatorSite::fetching_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; fetching_</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00123">ValidatorSite.h:123</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_ac88169a7bd5065dd8eb3a1c30bee0cea"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#ac88169a7bd5065dd8eb3a1c30bee0cea">ripple::ValidatorSite::~ValidatorSite</a></div><div class="ttdeci">~ValidatorSite()</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00103">ValidatorSite.cpp:103</a></div></div>
<div class="ttc" id="anamespaceripple_1_1detail_html_aeb2a1b7b18c8dd127461be172a910a66"><div class="ttname"><a href="namespaceripple_1_1detail.html#aeb2a1b7b18c8dd127461be172a910a66">ripple::detail::response_type</a></div><div class="ttdeci">boost::beast::http::response&lt; boost::beast::http::string_body &gt; response_type</div><div class="ttdef"><b>Definition:</b> <a href="Work_8h_source.html#l00031">Work.h:31</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_ac9fbfd6284b1908abb5c133b19f4df8a"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#ac9fbfd6284b1908abb5c133b19f4df8a">ripple::ValidatorSite::app_</a></div><div class="ttdeci">Application &amp; app_</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00112">ValidatorSite.h:112</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a0998c84194888eef2571ece8ae120f28"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a0998c84194888eef2571ece8ae120f28">ripple::ValidatorSite::parseJsonResponse</a></div><div class="ttdeci">void parseJsonResponse(std::string const &amp;res, std::size_t siteIdx, std::lock_guard&lt; std::mutex &gt; &amp;lock)</div><div class="ttdoc">Parse json response from validator list site.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00364">ValidatorSite.cpp:364</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_1_1Status_html_a051a2a912896e81b91346204942255fe"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site_1_1Status.html#a051a2a912896e81b91346204942255fe">ripple::ValidatorSite::Site::Status::refreshed</a></div><div class="ttdeci">clock_type::time_point refreshed</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00079">ValidatorSite.h:79</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_acb695da845a4ea5cd8e9a04032896a47"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#acb695da845a4ea5cd8e9a04032896a47">ripple::ValidatorSite::pending_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; pending_</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00126">ValidatorSite.h:126</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_af0befe58e9ce7f51503d1362fa9bc486"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#af0befe58e9ce7f51503d1362fa9bc486">ripple::ValidatorSite::ValidatorSite</a></div><div class="ttdeci">ValidatorSite(Application &amp;app, boost::optional&lt; beast::Journal &gt; j=boost::none, std::chrono::seconds timeout=std::chrono::seconds{20})</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00089">ValidatorSite.cpp:89</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a312f364fbd7a199243881139578c9ac7"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a312f364fbd7a199243881139578c9ac7">ripple::ValidatorSite::getJson</a></div><div class="ttdeci">Json::Value getJson() const</div><div class="ttdoc">Return JSON representation of configured validator sites.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00643">ValidatorSite.cpp:643</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_ae15d45ff053a79317feb96a72931ff18"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#ae15d45ff053a79317feb96a72931ff18">ripple::ValidatorSite::j_</a></div><div class="ttdeci">const beast::Journal j_</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00113">ValidatorSite.h:113</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a0b6c467cf0ab7b9da438dcb9fcefa849"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a0b6c467cf0ab7b9da438dcb9fcefa849">ripple::ValidatorSite::cv_</a></div><div class="ttdeci">std::condition_variable cv_</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00118">ValidatorSite.h:118</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_1_1Status_html_a8a4c75f97ab028a61b0234965200e247"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site_1_1Status.html#a8a4c75f97ab028a61b0234965200e247">ripple::ValidatorSite::Site::Status::message</a></div><div class="ttdeci">std::string message</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00081">ValidatorSite.h:81</a></div></div>
<div class="ttc" id="aclassbeast_1_1Journal_html"><div class="ttname"><a href="classbeast_1_1Journal.html">beast::Journal</a></div><div class="ttdoc">A generic endpoint for log messages.</div><div class="ttdef"><b>Definition:</b> <a href="Journal_8h_source.html#l00060">Journal.h:60</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a6a943ee7c2eb6885495bed7368b18350"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a6a943ee7c2eb6885495bed7368b18350">ripple::ValidatorSite::join</a></div><div class="ttdeci">void join()</div><div class="ttdoc">Wait for current fetches from sites to complete.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00172">ValidatorSite.cpp:172</a></div></div>
<div class="ttc" id="aatomic_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/atomic/atomic.html">std::atomic&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a4531ee7ec60be0e673eb38fab1c4de37"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a4531ee7ec60be0e673eb38fab1c4de37">ripple::ValidatorSite::sites_mutex_</a></div><div class="ttdeci">std::mutex sites_mutex_</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00115">ValidatorSite.h:115</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_html_aa4105c913e2286bf65cec69a77a9a191"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site.html#aa4105c913e2286bf65cec69a77a9a191">ripple::ValidatorSite::Site::redirCount</a></div><div class="ttdeci">unsigned short redirCount</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00106">ValidatorSite.h:106</a></div></div>
<div class="ttc" id="amemory_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/header/memory.html">memory</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a23da2191bf3778f552d18b7c9baf339c"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a23da2191bf3778f552d18b7c9baf339c">ripple::ValidatorSite::sites_</a></div><div class="ttdeci">std::vector&lt; Site &gt; sites_</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00130">ValidatorSite.h:130</a></div></div>
<div class="ttc" id="aweak_ptr_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/memory/weak_ptr.html">std::weak_ptr</a></div><div class="ttdoc">STL class.</div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_aad0d54021d12211a070eb6e2908d5607"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#aad0d54021d12211a070eb6e2908d5607">ripple::ValidatorSite::makeRequest</a></div><div class="ttdeci">void makeRequest(std::shared_ptr&lt; Site::Resource &gt; resource, std::size_t siteIdx, std::lock_guard&lt; std::mutex &gt; &amp;lock)</div><div class="ttdoc">Initiate request to given resource.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00229">ValidatorSite.cpp:229</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_html_acd8891a9a8eab080a9991dba2cebff43"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site.html#acd8891a9a8eab080a9991dba2cebff43">ripple::ValidatorSite::Site::nextRefresh</a></div><div class="ttdeci">clock_type::time_point nextRefresh</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00108">ValidatorSite.h:108</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_aeb939e5b36be96e4bac8a590a8700850"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#aeb939e5b36be96e4bac8a590a8700850">ripple::ValidatorSite::requestTimeout_</a></div><div class="ttdeci">const std::chrono::seconds requestTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00133">ValidatorSite.h:133</a></div></div>
<div class="ttc" id="anamespaceripple_html"><div class="ttname"><a href="namespaceripple.html">ripple</a></div><div class="ttdoc">Use hash_* containers for keys that do not need a cryptographically secure hashing algorithm.</div><div class="ttdef"><b>Definition:</b> <a href="RCLCensorshipDetector_8h_source.html#l00029">RCLCensorshipDetector.h:29</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_1_1Resource_html"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site_1_1Resource.html">ripple::ValidatorSite::Site::Resource</a></div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00084">ValidatorSite.h:84</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_html_aa44e856f21ef00d4d14401f1212930a9"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site.html#aa44e856f21ef00d4d14401f1212930a9">ripple::ValidatorSite::Site::activeResource</a></div><div class="ttdeci">std::shared_ptr&lt; Resource &gt; activeResource</div><div class="ttdoc">the active resource being requested.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00104">ValidatorSite.h:104</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_1_1Resource_html_afe65f03ab908c1d1f997143c38a18333"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site_1_1Resource.html#afe65f03ab908c1d1f997143c38a18333">ripple::ValidatorSite::Site::Resource::Resource</a></div><div class="ttdeci">Resource(std::string uri_)</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00040">ValidatorSite.cpp:40</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a4b504b4aa14b42ae424d4195391748c1"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a4b504b4aa14b42ae424d4195391748c1">ripple::ValidatorSite::onTextFetch</a></div><div class="ttdeci">void onTextFetch(boost::system::error_code const &amp;ec, std::string const &amp;res, std::size_t siteIdx)</div><div class="ttdoc">Store latest list fetched from anywhere.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00602">ValidatorSite.cpp:602</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_1_1Status_html_ac30a88227005185ee3ce1e3ce8efa687"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site_1_1Status.html#ac30a88227005185ee3ce1e3ce8efa687">ripple::ValidatorSite::Site::Status::disposition</a></div><div class="ttdeci">ListDisposition disposition</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00080">ValidatorSite.h:80</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_html_a092ee2780769bf0db0beccebf6b0d431"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site.html#a092ee2780769bf0db0beccebf6b0d431">ripple::ValidatorSite::Site::loadedResource</a></div><div class="ttdeci">std::shared_ptr&lt; Resource &gt; loadedResource</div><div class="ttdoc">the original uri as loaded from config</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00094">ValidatorSite.h:94</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a65d08f2fd201e3996243118d9008b3a9"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a65d08f2fd201e3996243118d9008b3a9">ripple::ValidatorSite::stopping_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; stopping_</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00127">ValidatorSite.h:127</a></div></div>
<div class="ttc" id="acondition_variable_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/thread/condition_variable.html">std::condition_variable</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_html_a5ac58b976d710e8c7748e522ca680aa7"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site.html#a5ac58b976d710e8c7748e522ca680aa7">ripple::ValidatorSite::Site::Site</a></div><div class="ttdeci">Site(std::string uri)</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00080">ValidatorSite.cpp:80</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_aae5e48f0c7cf0614f7987d943499a2e1"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#aae5e48f0c7cf0614f7987d943499a2e1">ripple::ValidatorSite::missingSite</a></div><div class="ttdeci">bool missingSite()</div><div class="ttdoc">If no sites are provided, or a site fails to load, get a list of local cache files from the Validator...</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00121">ValidatorSite.cpp:121</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_1_1Resource_html_a618535bf08e7b386d6be2200d890a972"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site_1_1Resource.html#a618535bf08e7b386d6be2200d890a972">ripple::ValidatorSite::Site::Resource::pUrl</a></div><div class="ttdeci">parsedURL pUrl</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00088">ValidatorSite.h:88</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_1_1Status_html"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site_1_1Status.html">ripple::ValidatorSite::Site::Status</a></div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00077">ValidatorSite.h:77</a></div></div>
<div class="ttc" id="amutex_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/header/mutex.html">mutex</a></div></div>
<div class="ttc" id="asize_t_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/types/size_t.html">std::size_t</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a032e94a043c94549a1ef8f74fd6b9d7e"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a032e94a043c94549a1ef8f74fd6b9d7e">ripple::ValidatorSite::start</a></div><div class="ttdeci">void start()</div><div class="ttdoc">Start fetching lists from sites.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00164">ValidatorSite.cpp:164</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_ad71f44be0f749d7fe519f9fe4d076fbd"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#ad71f44be0f749d7fe519f9fe4d076fbd">ripple::ValidatorSite::onTimer</a></div><div class="ttdeci">void onTimer(std::size_t siteIdx, error_code const &amp;ec)</div><div class="ttdoc">Fetch site whose time has come.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00332">ValidatorSite.cpp:332</a></div></div>
<div class="ttc" id="astructripple_1_1ValidatorSite_1_1Site_html_a0ade9d2f585b28bce6be5c9b9cea8836"><div class="ttname"><a href="structripple_1_1ValidatorSite_1_1Site.html#a0ade9d2f585b28bce6be5c9b9cea8836">ripple::ValidatorSite::Site::startingResource</a></div><div class="ttdeci">std::shared_ptr&lt; Resource &gt; startingResource</div><div class="ttdoc">the resource to request at &lt;timer&gt; intervals.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00099">ValidatorSite.h:99</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_accb524d6aaf2c9b2e4f11b2a2e618292"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#accb524d6aaf2c9b2e4f11b2a2e618292">ripple::ValidatorSite::error_code</a></div><div class="ttdeci">boost::system::error_code error_code</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8h_source.html#l00072">ValidatorSite.h:72</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a60e997403b0b276194f449fcd8da2eb8"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a60e997403b0b276194f449fcd8da2eb8">ripple::ValidatorSite::setTimer</a></div><div class="ttdeci">void setTimer(std::lock_guard&lt; std::mutex &gt; &amp;)</div><div class="ttdoc">Queue next site to be fetched lock over state_mutex_ required.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00205">ValidatorSite.cpp:205</a></div></div>
<div class="ttc" id="aclassripple_1_1ValidatorSite_html_a48455b1eafd136de8b62538194ea9702"><div class="ttname"><a href="classripple_1_1ValidatorSite.html#a48455b1eafd136de8b62538194ea9702">ripple::ValidatorSite::load</a></div><div class="ttdeci">bool load(std::vector&lt; std::string &gt; const &amp;siteURIs)</div><div class="ttdoc">Load configured site URIs.</div><div class="ttdef"><b>Definition:</b> <a href="ValidatorSite_8cpp_source.html#l00128">ValidatorSite.cpp:128</a></div></div>
<div class="ttc" id="aclassJson_1_1Value_html"><div class="ttname"><a href="classJson_1_1Value.html">Json::Value</a></div><div class="ttdoc">Represents a JSON value.</div><div class="ttdef"><b>Definition:</b> <a href="json__value_8h_source.html#l00141">json_value.h:141</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
