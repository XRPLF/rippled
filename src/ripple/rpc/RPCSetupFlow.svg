<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="752px" preserveAspectRatio="none" style="width:1878px;height:752px;" version="1.1" viewBox="0 0 1878 752" width="1878px" zoomAndPan="magnify"><defs><filter height="300%" id="f4l0dib1e269o" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="215" x="830.75" y="22.9951">"Flow of RPC server setup"</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="786.5" y="82.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="793.5" y="102.5889">ApplicationImpl</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="550" y="127.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="557" y="147.8857">BasicApp</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="341" y="230.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="348" y="250.4482">JobQueue</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="437" y="275.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="444" y="295.7451">NetworkOPs</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1124" y="321.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1131" y="341.042">ServerHandlerImpl</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="1422.5" y="366.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="1429.5" y="386.3389">ServerImpl</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="190" x="72" y="469.9063"/><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="190" x="68" y="473.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="176" x="75" y="493.9014">JobQueue worker threads</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="1716.5" y="577.4688"/><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="1712.5" y="581.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="1719.5" y="601.4639">Doors</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="33" x2="33" y1="72.5938" y2="708.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="167" x2="167" y1="504.5547" y2="708.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="384" x2="384" y1="263.1016" y2="708.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="488" x2="488" y1="308.3984" y2="708.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="591" x2="591" y1="160.5391" y2="708.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="846.5" x2="846.5" y1="115.2422" y2="708.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1195" x2="1195" y1="353.6953" y2="708.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1467.5" x2="1467.5" y1="398.9922" y2="708.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1744.5" x2="1744.5" y1="612.1172" y2="708.0313"/><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="8" y="37.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="15" y="57.292">Main</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="8" y="707.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="15" y="727.0264">Main</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="190" x="72" y="707.0313"/><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="190" x="68" y="711.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="176" x="75" y="731.0264">JobQueue worker threads</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="341" y="707.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="348" y="727.0264">JobQueue</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="437" y="707.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="444" y="727.0264">NetworkOPs</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="550" y="707.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="557" y="727.0264">BasicApp</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="786.5" y="707.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="793.5" y="727.0264">ApplicationImpl</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1124" y="707.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1131" y="727.0264">ServerHandlerImpl</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="1422.5" y="707.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="1429.5" y="727.0264">ServerImpl</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="1716.5" y="707.0313"/><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="1712.5" y="711.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="1719.5" y="731.0264">Doors</text><polygon fill="#A80036" points="774.5,99.5938,784.5,103.5938,774.5,107.5938,778.5,103.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33" x2="780.5" y1="103.5938" y2="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="40" y="98.6606">construct</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="786.5" y="82.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="793.5" y="102.5889">ApplicationImpl</text><polygon fill="#A80036" points="643,144.8906,633,148.8906,643,152.8906,639,148.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637" x2="846" y1="148.8906" y2="148.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="649" y="143.9575">construct</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="550" y="127.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="557" y="147.8857">BasicApp</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="591" x2="633" y1="209.4531" y2="209.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="633" x2="633" y1="209.4531" y2="222.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="592" x2="633" y1="222.4531" y2="222.4531"/><polygon fill="#A80036" points="602,218.4531,592,222.4531,602,226.4531,598,222.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="598" y="189.2544">create two threads.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="602" y="204.3872">call io_service.run() from each thread</text><polygon fill="#A80036" points="438,247.4531,428,251.4531,438,255.4531,434,251.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="432" x2="846" y1="251.4531" y2="251.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="444" y="246.52">construct</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="341" y="230.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="348" y="250.4482">JobQueue</text><polygon fill="#A80036" points="551,292.75,541,296.75,551,300.75,547,296.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="545" x2="846" y1="296.75" y2="296.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="557" y="291.8169">construct</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="437" y="275.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="444" y="295.7451">NetworkOPs</text><polygon fill="#A80036" points="1112,338.0469,1122,342.0469,1112,346.0469,1116,342.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847" x2="1118" y1="342.0469" y2="342.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="253" x="854" y="337.1138">construct (via make_ServerHandler(...))</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1124" y="321.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1131" y="341.042">ServerHandlerImpl</text><polygon fill="#A80036" points="1410.5,383.3438,1420.5,387.3438,1410.5,391.3438,1414.5,387.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1195.5" x2="1416.5" y1="387.3438" y2="387.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="1202.5" y="382.4106">construct (via make_Server(...))</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="1422.5" y="366.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="1429.5" y="386.3389">ServerImpl</text><polygon fill="#A80036" points="835,428.6406,845,432.6406,835,436.6406,839,432.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33" x2="841" y1="432.6406" y2="432.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="40" y="427.7075">setup()</text><polygon fill="#A80036" points="395,457.7734,385,461.7734,395,465.7734,391,461.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="846" y1="461.7734" y2="461.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="401" y="456.8403">setThreadCount(...)</text><polygon fill="#A80036" points="277,486.9063,267,490.9063,277,494.9063,273,490.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="271" x2="383" y1="490.9063" y2="490.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="283" y="485.9731">create threads</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="190" x="72" y="469.9063"/><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="190" x="68" y="473.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="176" x="75" y="493.9014">JobQueue worker threads</text><polygon fill="#A80036" points="1183.5,536.2031,1193.5,540.2031,1183.5,544.2031,1187.5,540.2031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847" x2="1189.5" y1="540.2031" y2="540.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="854" y="535.27">setup() (pass port configurations)</text><polygon fill="#A80036" points="1455.5,565.3359,1465.5,569.3359,1455.5,573.3359,1459.5,569.3359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1195.5" x2="1461.5" y1="569.3359" y2="569.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="1202.5" y="564.4028">ports() (pass port configurations)</text><polygon fill="#A80036" points="1700.5,609.4688,1710.5,613.4688,1700.5,617.4688,1704.5,613.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1467.5" x2="1706.5" y1="613.4688" y2="613.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="1474.5" y="593.5356">contruct all Doors</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="1478.5" y="608.6685">(for each port, pass configuration)</text><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="1716.5" y="577.4688"/><rect fill="#FEFECE" filter="url(#f4l0dib1e269o)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="1712.5" y="581.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="1719.5" y="601.4639">Doors</text><polygon fill="#A80036" points="1732.5,643.7656,1742.5,647.7656,1732.5,651.7656,1736.5,647.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1467.5" x2="1738.5" y1="647.7656" y2="647.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="1474.5" y="642.8325">run()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1744.5" x2="1786.5" y1="677.0313" y2="677.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1786.5" x2="1786.5" y1="677.0313" y2="690.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1745.5" x2="1786.5" y1="690.0313" y2="690.0313"/><polygon fill="#A80036" points="1755.5,686.0313,1745.5,690.0313,1755.5,694.0313,1751.5,690.0313" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="1751.5" y="671.9653">listen for requests</text><!--
@startuml

Title "Flow of RPC server setup"

participant Main
collections "JobQueue worker threads"
participant JobQueue
participant NetworkOPs
participant BasicApp
participant ApplicationImpl
participant ServerHandlerImpl
participant ServerImpl
collections Doors



create ApplicationImpl
Main -> ApplicationImpl : construct
create BasicApp
ApplicationImpl -> BasicApp : construct
BasicApp -> BasicApp : create two threads. \n call io_service.run() from each thread
create JobQueue
ApplicationImpl -> JobQueue : construct
create NetworkOPs
ApplicationImpl -> NetworkOPs : construct
create ServerHandlerImpl
ApplicationImpl -> ServerHandlerImpl : construct (via make_ServerHandler(...))
create ServerImpl
ServerHandlerImpl -> ServerImpl : construct (via make_Server(...))

Main -> ApplicationImpl : setup()
ApplicationImpl -> JobQueue : setThreadCount(...)
create "JobQueue worker threads"
JobQueue -> "JobQueue worker threads" : create threads
ApplicationImpl -> ServerHandlerImpl : setup() (pass port configurations)
ServerHandlerImpl -> ServerImpl : ports() (pass port configurations)
create Doors
ServerImpl -> Doors : contruct all Doors \n (for each port, pass configuration)
ServerImpl -> Doors : run()
Doors -> Doors : listen for requests

@enduml

PlantUML version 1.2017.15(Mon Jul 03 09:45:34 PDT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.5+10-post-Ubuntu-0ubuntu1.118.04
Operating System: Linux
OS Version: 5.3.2-050302-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>