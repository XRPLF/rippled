<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="489px" preserveAspectRatio="none" style="width:960px;height:489px;" version="1.1" viewBox="0 0 960 489" width="960px" zoomAndPan="magnify"><defs><filter height="300%" id="fpuvbrts7cpot" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="325" x="318" y="22.9951">"Request Processing Execution Concept"</text><rect fill="#FFFFFF" filter="url(#fpuvbrts7cpot)" height="35.2969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="383" y="142.7266"/><rect fill="#FFFFFF" filter="url(#fpuvbrts7cpot)" height="239.2266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="636" y="188.0234"/><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="288.5" y="111.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="181" x="295.5" y="131.7217">PlainHTTPPeer asio strand</text><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="549" y="157.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="556" y="177.0186">PlainWSPeer asio strand</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="36" x2="36" y1="72.5938" y2="445.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="170.5" x2="170.5" y1="72.5938" y2="445.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="387.5" x2="387.5" y1="144.375" y2="445.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="641" x2="641" y1="189.6719" y2="445.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="858" x2="858" y1="72.5938" y2="445.3828"/><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="8" y="37.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="15" y="57.292">Client</text><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="8" y="444.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="15" y="464.3779">Client</text><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="104.5" y="37.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="111.5" y="57.292">Door asio strand</text><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="104.5" y="444.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="111.5" y="464.3779">Door asio strand</text><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="288.5" y="444.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="181" x="295.5" y="464.3779">PlainHTTPPeer asio strand</text><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="549" y="444.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="556" y="464.3779">PlainWSPeer asio strand</text><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="767" y="33.2969"/><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="763" y="37.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="168" x="770" y="57.292">JobQueue worker thread</text><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="767" y="444.3828"/><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="763" y="448.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="168" x="770" y="468.3779">JobQueue worker thread</text><rect fill="#FFFFFF" filter="url(#fpuvbrts7cpot)" height="35.2969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="383" y="142.7266"/><rect fill="#FFFFFF" filter="url(#fpuvbrts7cpot)" height="239.2266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="636" y="188.0234"/><polygon fill="#A80036" points="158.5,99.5938,168.5,103.5938,158.5,107.5938,162.5,103.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="36.5" x2="164.5" y1="103.5938" y2="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="43.5" y="98.6606">Request received</text><polygon fill="#A80036" points="276.5,128.7266,286.5,132.7266,276.5,136.7266,280.5,132.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="170.5" x2="282.5" y1="132.7266" y2="132.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="177.5" y="127.7935">Object created</text><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="288.5" y="111.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="181" x="295.5" y="131.7217">PlainHTTPPeer asio strand</text><polygon fill="#A80036" points="537,174.0234,547,178.0234,537,182.0234,541,178.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388" x2="543" y1="178.0234" y2="178.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="395" y="173.0903">Web Socket upgrade</text><rect fill="#FEFECE" filter="url(#fpuvbrts7cpot)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="549" y="157.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="556" y="177.0186">PlainWSPeer asio strand</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="379" x2="397" y1="169.0234" y2="187.0234"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="379" x2="397" y1="187.0234" y2="169.0234"/><polygon fill="#A80036" points="846,219.3203,856,223.3203,846,227.3203,850,223.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="646" x2="852" y1="223.3203" y2="223.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="653" y="218.3872">Execute handler</text><polygon fill="#A80036" points="657,248.4531,647,252.4531,657,256.4531,653,252.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="651" x2="857" y1="252.4531" y2="252.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="663" y="247.52">Return handler result</text><polygon fill="#A80036" points="47.5,277.5859,37.5,281.5859,47.5,285.5859,43.5,281.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41.5" x2="635" y1="281.5859" y2="281.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="53.5" y="276.6528">Send response</text><polygon fill="#A80036" points="624,306.7188,634,310.7188,624,314.7188,628,310.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="36.5" x2="630" y1="310.7188" y2="310.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="43.5" y="305.7856">Send next message</text><polygon fill="#A80036" points="846,335.8516,856,339.8516,846,343.8516,850,339.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="646" x2="852" y1="339.8516" y2="339.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="653" y="334.9185">Execute handler for next msg</text><polygon fill="#A80036" points="657,364.9844,647,368.9844,657,372.9844,653,368.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="651" x2="857" y1="368.9844" y2="368.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="663" y="364.0513">Return handler result</text><polygon fill="#A80036" points="47.5,394.1172,37.5,398.1172,47.5,402.1172,43.5,398.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41.5" x2="635" y1="398.1172" y2="398.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="53.5" y="393.1841">Send response</text><polygon fill="#A80036" points="629,423.25,639,427.25,629,431.25,633,427.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="36.5" x2="635" y1="427.25" y2="427.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="43.5" y="422.3169">Close connection</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="632" x2="650" y1="418.25" y2="436.25"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="632" x2="650" y1="436.25" y2="418.25"/><!--
@startuml

Title "Request Processing Execution Concept"

participant "Client" as C
participant "Door asio strand" as Door
participant "PlainHTTPPeer asio strand" as P
participant "PlainWSPeer asio strand" as WS
collections "JobQueue worker thread" as J

C -> Door : Request received
create P
Door -> P : Object created
activate P
create WS
P -> WS : Web Socket upgrade
destroy P
deactivate P
activate WS
WS -> J : Execute handler
J -> WS : Return handler result
WS -> C : Send response
C -> WS : Send next message
WS -> J : Execute handler for next msg
J -> WS : Return handler result
WS -> C : Send response
C -> WS : Close connection
destroy WS
deactivate WS



@enduml

PlantUML version 1.2017.15(Mon Jul 03 09:45:34 PDT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.5+10-post-Ubuntu-0ubuntu1.118.04
Operating System: Linux
OS Version: 5.3.2-050302-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>