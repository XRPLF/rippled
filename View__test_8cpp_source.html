<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rippled: View_test.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rippled
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_120ed4da3e3217b1e7fc0b4f48568e79.html">test</a></li><li class="navelem"><a class="el" href="dir_a9ccb529ba7bcf89cf1784a454c5bb08.html">ledger</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">View_test.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">    This file is part of rippled: https://github.com/ripple/rippled</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">    Copyright (c) 2012, 2013 Ripple Labs Inc.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">    Permission to use, copy, modify, and/or distribute this software for any</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">    purpose  with  or without fee is hereby granted, provided that the above</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">    copyright notice and this permission notice appear in all copies.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">    THE  SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">    WITH  REGARD  TO  THIS  SOFTWARE  INCLUDING  ALL  IMPLIED  WARRANTIES  OF</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    MERCHANTABILITY  AND  FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">    ANY  SPECIAL ,  DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">    WHATSOEVER  RESULTING  FROM  LOSS  OF USE, DATA OR PROFITS, WHETHER IN AN</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    ACTION  OF  CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">    OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//==============================================================================</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;ripple/app/ledger/Ledger.h&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;ripple/core/ConfigSections.h&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;ripple/ledger/ApplyViewImpl.h&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;ripple/ledger/OpenView.h&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;ripple/ledger/PaymentSandbox.h&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;ripple/ledger/Sandbox.h&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;ripple/protocol/Feature.h&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;ripple/protocol/Protocol.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;test/jtx.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;<a class="codeRef" href="http://en.cppreference.com/w/cpp/header/type_traits.html">type_traits</a>&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceripple.html">ripple</a> {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">namespace </span>test {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html">   34</a></span>&#160;<span class="keyword">class </span><a class="code" href="classripple_1_1test_1_1View__test.html">View_test</a> : <span class="keyword">public</span> beast::unit_test::suite</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;{</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// Convert a small integer to a key</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keyword">static</span> <a class="code" href="structripple_1_1Keylet.html">Keylet</a></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">   38</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(<a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint64_t</a> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structripple_1_1Keylet.html">Keylet</a>{<a class="code" href="namespaceripple.html#af6e0324b257fc9992b83ecf827c2a07bac03405d2da6d19e17f321a6b7f7a412e">ltACCOUNT_ROOT</a>, <a class="code" href="namespaceripple.html#a356c68147333a9a48a344718038576d9">uint256</a>(<span class="keywordtype">id</span>)};</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    }</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment">// Create SLE with key and payload</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keyword">static</span> <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;SLE&gt;</a></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">   45</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(<a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint64_t</a> <span class="keywordtype">id</span>, <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a> <a class="code" href="structripple_1_1test_1_1jtx_1_1seq.html">seq</a> = 1)</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> le = std::make_shared&lt;SLE&gt;(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(<span class="keywordtype">id</span>));</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        le-&gt;setFieldU32(<a class="code" href="namespaceripple.html#a75d94908bf27ab4f7ec61a457e52ee8e">sfSequence</a>, <a class="code" href="structripple_1_1test_1_1jtx_1_1seq.html">seq</a>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">return</span> le;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">// Return payload for SLE</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keyword">static</span> <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">   55</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(<a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;T&gt;</a> <span class="keyword">const</span>&amp; le)</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">return</span> le-&gt;getFieldU32(<a class="code" href="namespaceripple.html#a75d94908bf27ab4f7ec61a457e52ee8e">sfSequence</a>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// Set payload on SLE</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#a14d9c2a98db10bbe288ba36d73740e75">   62</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#a14d9c2a98db10bbe288ba36d73740e75">seq</a>(<a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;SLE&gt;</a> <span class="keyword">const</span>&amp; le, <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a> <a class="code" href="structripple_1_1test_1_1jtx_1_1seq.html">seq</a>)</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        le-&gt;setFieldU32(<a class="code" href="namespaceripple.html#a75d94908bf27ab4f7ec61a457e52ee8e">sfSequence</a>, <a class="code" href="structripple_1_1test_1_1jtx_1_1seq.html">seq</a>);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// Erase all state items</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#a6d746e59eef5e7c4144b2065ae6f7622">   69</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#a6d746e59eef5e7c4144b2065ae6f7622">wipe</a>(<a class="code" href="classripple_1_1OpenLedger.html">OpenLedger</a>&amp; openLedger)</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        openLedger.<a class="code" href="classripple_1_1OpenLedger.html#a05ada40b015a008ffd28668b8daf5808">modify</a>([](<a class="code" href="classripple_1_1OpenView.html">OpenView</a>&amp; view, <a class="code" href="classbeast_1_1Journal.html">beast::Journal</a>) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <span class="comment">// HACK!</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            boost::optional&lt;uint256&gt; next;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            next.emplace(0);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                next = view.<a class="code" href="classripple_1_1OpenView.html#a111df7decb50a3a2cb279b12acb5fc55">succ</a>(*next);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                <span class="keywordflow">if</span> (!next)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                view.<a class="code" href="classripple_1_1OpenView.html#ab8ec1fb6833f8962f766b214c580ab7b">rawErase</a>(std::make_shared&lt;SLE&gt;(</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                    *view.<a class="code" href="classripple_1_1OpenView.html#ad31c6cb5856530ac7d72bf01fe780d43">read</a>(<a class="code" href="namespaceripple_1_1keylet.html#a78921721302f172696ebc5c64e279763">keylet::unchecked</a>(*next))));</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        });</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#a0ec9402f8cd5a506db6de1828be69191">   88</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#a0ec9402f8cd5a506db6de1828be69191">wipe</a>(<a class="code" href="classripple_1_1Ledger.html">Ledger</a>&amp; ledger)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="comment">// HACK!</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        boost::optional&lt;uint256&gt; next;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        next.emplace(0);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            next = ledger.<a class="code" href="classripple_1_1Ledger.html#a2f3afbe3023c3456963a20b30a1bbdfe">succ</a>(*next);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="keywordflow">if</span> (!next)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            ledger.<a class="code" href="classripple_1_1Ledger.html#a27f6d838768ff645f63dbbca85160ab7">rawErase</a>(</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                std::make_shared&lt;SLE&gt;(*ledger.<a class="code" href="classripple_1_1Ledger.html#a85c52f6c826b0b32bd773e1d1cfbdb78">read</a>(<a class="code" href="namespaceripple_1_1keylet.html#a78921721302f172696ebc5c64e279763">keylet::unchecked</a>(*next))));</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// Test succ correctness</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">  105</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="classripple_1_1ReadView.html">ReadView</a> <span class="keyword">const</span>&amp; v,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a> <span class="keywordtype">id</span>,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        boost::optional&lt;std::uint32_t&gt; answer)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> next = v.<a class="code" href="classripple_1_1ReadView.html#a2b1718fdf4ffd63d8fe7650f66114804">succ</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(<span class="keywordtype">id</span>).key);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">if</span> (answer)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordflow">if</span> (BEAST_EXPECT(next))</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                BEAST_EXPECT(*next == <a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(*answer).<a class="code" href="structripple_1_1Keylet.html#a482983062843a8682fcea76a309c73db">key</a>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            BEAST_EXPECT(!next);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keyword">static</span> <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;std::remove_const_t&lt;T&gt;</a>&gt;</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#a44de65bb5f829206aa5decfe308e0a37">  124</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#a44de65bb5f829206aa5decfe308e0a37">copy</a>(<a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;T&gt;</a> <span class="keyword">const</span>&amp; sp)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">return</span> std::make_shared&lt;std::remove_const_t&lt;T&gt;&gt;(*sp);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// Exercise Ledger implementation of ApplyView</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#a4af3a487d399abe48fef4e8dff23ac99">  131</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#a4af3a487d399abe48fef4e8dff23ac99">testLedger</a>()</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keyword">using namespace </span>jtx;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html">Env</a> env(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="classripple_1_1Config.html">Config</a> config;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Ledger const&gt;</a> <span class="keyword">const</span> genesis = std::make_shared&lt;Ledger&gt;(</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <a class="code" href="namespaceripple.html#a2995be43488ad73c05c5541036d99d5a">create_genesis</a>,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            config,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;uint256&gt;</a>{},</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a9e55bbdb66a785bfd0dda93802b514b6">app</a>().getNodeFamily());</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> ledger = std::make_shared&lt;Ledger&gt;(</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            *genesis, env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a9e55bbdb66a785bfd0dda93802b514b6">app</a>().<a class="code" href="classripple_1_1Application.html#a280004d4cce56d8f1ec4664950aa58d4">timeKeeper</a>().<a class="code" href="classripple_1_1TimeKeeper.html#a106491f0751b8c2c75978a4d1f7aa0e6">closeTime</a>());</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#a6d746e59eef5e7c4144b2065ae6f7622">wipe</a>(*ledger);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="classripple_1_1ReadView.html">ReadView</a>&amp; v = *ledger;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v, 0, boost::none);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        ledger-&gt;rawInsert(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(1, 1));</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        BEAST_EXPECT(v.<a class="code" href="classripple_1_1ReadView.html#ac1d377c35a8332d069b09be8f4008dec">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1)));</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v.<a class="code" href="classripple_1_1ReadView.html#a3351e0244f921234d5ba005a07ddf539">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1))) == 1);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v, 0, 1);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v, 1, boost::none);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        ledger-&gt;rawInsert(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(2, 2));</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v.<a class="code" href="classripple_1_1ReadView.html#a3351e0244f921234d5ba005a07ddf539">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2))) == 2);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        ledger-&gt;rawInsert(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(3, 3));</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v.<a class="code" href="classripple_1_1ReadView.html#a3351e0244f921234d5ba005a07ddf539">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(3))) == 3);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keyword">auto</span> s = <a class="code" href="classripple_1_1test_1_1View__test.html#a44de65bb5f829206aa5decfe308e0a37">copy</a>(v.<a class="code" href="classripple_1_1ReadView.html#a3351e0244f921234d5ba005a07ddf539">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2)));</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(s, 4);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        ledger-&gt;rawReplace(s);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v.<a class="code" href="classripple_1_1ReadView.html#a3351e0244f921234d5ba005a07ddf539">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2))) == 4);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        ledger-&gt;rawErase(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(2));</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        BEAST_EXPECT(!v.<a class="code" href="classripple_1_1ReadView.html#ac1d377c35a8332d069b09be8f4008dec">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2)));</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        BEAST_EXPECT(v.<a class="code" href="classripple_1_1ReadView.html#ac1d377c35a8332d069b09be8f4008dec">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1)));</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        BEAST_EXPECT(v.<a class="code" href="classripple_1_1ReadView.html#ac1d377c35a8332d069b09be8f4008dec">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(3)));</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#ad7d00b70c5c289d33d40aefeb9af5beb">  166</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#ad7d00b70c5c289d33d40aefeb9af5beb">testMeta</a>()</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keyword">using namespace </span>jtx;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html">Env</a> env(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#a6d746e59eef5e7c4144b2065ae6f7622">wipe</a>(env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a9e55bbdb66a785bfd0dda93802b514b6">app</a>().<a class="code" href="classripple_1_1Application.html#a002e22abe4c34d378ff9ece1ab46c7ea">openLedger</a>());</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> <a class="code" href="namespaceripple.html#a886ed36db831a964fc5f66ebbb4fe3d0">open</a> = env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ace0420a6e752f5dc5400df6f2097647e">current</a>();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <a class="code" href="classripple_1_1ApplyViewImpl.html">ApplyViewImpl</a> v(&amp;*<a class="code" href="namespaceripple.html#a886ed36db831a964fc5f66ebbb4fe3d0">open</a>, <a class="code" href="namespaceripple.html#ad2487abbcc1a5d6064b72144b461df6eaf77cbea9706ce2ee7fdf5a85efbf70c5">tapNONE</a>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v, 0, boost::none);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a669490ced7bb2cab3a6cc704bc7286df">insert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(1));</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        BEAST_EXPECT(v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1)));</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1))) == 1);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#afe88196d7aec85f2af00d7cd0b1a28c3">peek</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1))) == 1);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v, 0, 1);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v, 1, boost::none);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a669490ced7bb2cab3a6cc704bc7286df">insert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(2, 2));</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2))) == 2);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a669490ced7bb2cab3a6cc704bc7286df">insert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(3, 3));</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keyword">auto</span> s = v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#afe88196d7aec85f2af00d7cd0b1a28c3">peek</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(3));</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(s) == 3);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        s = v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#afe88196d7aec85f2af00d7cd0b1a28c3">peek</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2));</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(s, 4);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4f12513f46ee2c194d6fb0e4d28e5543">update</a>(s);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2))) == 4);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a165c96d3bf59c98b608ffabcf2f70276">erase</a>(s);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        BEAST_EXPECT(!v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2)));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        BEAST_EXPECT(v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1)));</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        BEAST_EXPECT(v.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(3)));</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">// Exercise all succ paths</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#a24a0161bd55353bc9815d918eca70fd2">  197</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#a24a0161bd55353bc9815d918eca70fd2">testMetaSucc</a>()</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keyword">using namespace </span>jtx;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html">Env</a> env(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#a6d746e59eef5e7c4144b2065ae6f7622">wipe</a>(env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a9e55bbdb66a785bfd0dda93802b514b6">app</a>().<a class="code" href="classripple_1_1Application.html#a002e22abe4c34d378ff9ece1ab46c7ea">openLedger</a>());</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> <a class="code" href="namespaceripple.html#a886ed36db831a964fc5f66ebbb4fe3d0">open</a> = env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ace0420a6e752f5dc5400df6f2097647e">current</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="classripple_1_1ApplyViewImpl.html">ApplyViewImpl</a> v0(&amp;*<a class="code" href="namespaceripple.html#a886ed36db831a964fc5f66ebbb4fe3d0">open</a>, <a class="code" href="namespaceripple.html#ad2487abbcc1a5d6064b72144b461df6eaf77cbea9706ce2ee7fdf5a85efbf70c5">tapNONE</a>);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        v0.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a669490ced7bb2cab3a6cc704bc7286df">insert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(1));</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        v0.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a669490ced7bb2cab3a6cc704bc7286df">insert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(2));</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        v0.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a669490ced7bb2cab3a6cc704bc7286df">insert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(4));</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        v0.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a669490ced7bb2cab3a6cc704bc7286df">insert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(7));</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <a class="code" href="classripple_1_1Sandbox.html">Sandbox</a> v1(&amp;v0);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a669490ced7bb2cab3a6cc704bc7286df">insert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(3));</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a669490ced7bb2cab3a6cc704bc7286df">insert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(5));</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a669490ced7bb2cab3a6cc704bc7286df">insert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(6));</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="comment">// v0: 12-4--7</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="comment">// v1: --3-56-</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 0, 1);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 1, 2);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 2, 4);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 3, 4);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 4, 7);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 5, 7);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 6, 7);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 7, boost::none);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v1, 0, 1);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v1, 1, 2);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v1, 2, 3);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v1, 3, 4);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v1, 4, 5);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v1, 5, 6);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v1, 6, 7);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v1, 7, boost::none);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a165c96d3bf59c98b608ffabcf2f70276">erase</a>(v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#afe88196d7aec85f2af00d7cd0b1a28c3">peek</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(4)));</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v1, 3, 5);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a165c96d3bf59c98b608ffabcf2f70276">erase</a>(v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#afe88196d7aec85f2af00d7cd0b1a28c3">peek</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(6)));</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v1, 5, 7);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v1, 6, 7);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="comment">// v0: 12----7</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="comment">// v1: --3-5--</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            v1.<a class="code" href="classripple_1_1Sandbox.html#af027065a92ed80c4b54b08d7974c06ce">apply</a>(v0);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="comment">// v0: 123-5-7</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 0, 1);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 1, 2);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 2, 3);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 3, 5);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 4, 5);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 5, 7);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 6, 7);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">succ</a>(v0, 7, boost::none);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#ab548fbc346788e353914d76482acfbc6">  261</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#ab548fbc346788e353914d76482acfbc6">testStacked</a>()</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keyword">using namespace </span>jtx;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html">Env</a> env(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#a6d746e59eef5e7c4144b2065ae6f7622">wipe</a>(env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a9e55bbdb66a785bfd0dda93802b514b6">app</a>().<a class="code" href="classripple_1_1Application.html#a002e22abe4c34d378ff9ece1ab46c7ea">openLedger</a>());</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> <a class="code" href="namespaceripple.html#a886ed36db831a964fc5f66ebbb4fe3d0">open</a> = env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ace0420a6e752f5dc5400df6f2097647e">current</a>();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <a class="code" href="classripple_1_1ApplyViewImpl.html">ApplyViewImpl</a> v0(&amp;*<a class="code" href="namespaceripple.html#a886ed36db831a964fc5f66ebbb4fe3d0">open</a>, <a class="code" href="namespaceripple.html#ad2487abbcc1a5d6064b72144b461df6eaf77cbea9706ce2ee7fdf5a85efbf70c5">tapNONE</a>);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        v0.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#aacd0fa84b0681ca34739a9fddde754a0">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(1, 1));</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        v0.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#aacd0fa84b0681ca34739a9fddde754a0">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(2, 2));</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        v0.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#aacd0fa84b0681ca34739a9fddde754a0">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(4, 4));</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <a class="code" href="classripple_1_1Sandbox.html">Sandbox</a> v1(&amp;v0);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a165c96d3bf59c98b608ffabcf2f70276">erase</a>(v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#afe88196d7aec85f2af00d7cd0b1a28c3">peek</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2)));</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a669490ced7bb2cab3a6cc704bc7286df">insert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(3, 3));</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keyword">auto</span> s = v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#afe88196d7aec85f2af00d7cd0b1a28c3">peek</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(4));</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(s, 5);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4f12513f46ee2c194d6fb0e4d28e5543">update</a>(s);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1))) == 1);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            BEAST_EXPECT(!v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2)));</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(3))) == 3);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(4))) == 5);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                <a class="code" href="classripple_1_1Sandbox.html">Sandbox</a> v2(&amp;v1);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                <span class="keyword">auto</span> s2 = v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#afe88196d7aec85f2af00d7cd0b1a28c3">peek</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(3));</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(s2, 6);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4f12513f46ee2c194d6fb0e4d28e5543">update</a>(s2);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a165c96d3bf59c98b608ffabcf2f70276">erase</a>(v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#afe88196d7aec85f2af00d7cd0b1a28c3">peek</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(4)));</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1))) == 1);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                BEAST_EXPECT(!v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2)));</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(3))) == 6);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                BEAST_EXPECT(!v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(4)));</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <span class="comment">// discard v2</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1))) == 1);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            BEAST_EXPECT(!v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2)));</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(3))) == 3);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(4))) == 5);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                <a class="code" href="classripple_1_1Sandbox.html">Sandbox</a> v2(&amp;v1);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <span class="keyword">auto</span> s2 = v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#afe88196d7aec85f2af00d7cd0b1a28c3">peek</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(3));</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(s2, 6);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4f12513f46ee2c194d6fb0e4d28e5543">update</a>(s2);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a165c96d3bf59c98b608ffabcf2f70276">erase</a>(v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#afe88196d7aec85f2af00d7cd0b1a28c3">peek</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(4)));</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1))) == 1);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                BEAST_EXPECT(!v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2)));</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(3))) == 6);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                BEAST_EXPECT(!v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(4)));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                v2.<a class="code" href="classripple_1_1Sandbox.html#af027065a92ed80c4b54b08d7974c06ce">apply</a>(v1);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1))) == 1);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            BEAST_EXPECT(!v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2)));</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(3))) == 6);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            BEAST_EXPECT(!v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(4)));</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            v1.<a class="code" href="classripple_1_1Sandbox.html#af027065a92ed80c4b54b08d7974c06ce">apply</a>(v0);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v0.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1))) == 1);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        BEAST_EXPECT(!v0.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2)));</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(v0.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(3))) == 6);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        BEAST_EXPECT(!v0.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(4)));</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// Verify contextual information</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#a0e8e994b5cdd90ed5c9ceb881902c775">  326</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#a0e8e994b5cdd90ed5c9ceb881902c775">testContext</a>()</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keyword">using namespace </span>jtx;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keyword">using namespace </span><a class="codeRef" href="http://en.cppreference.com/w/namespacestd_1_1chrono.html">std::chrono</a>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html">Env</a> env(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#a6d746e59eef5e7c4144b2065ae6f7622">wipe</a>(env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a9e55bbdb66a785bfd0dda93802b514b6">app</a>().<a class="code" href="classripple_1_1Application.html#a002e22abe4c34d378ff9ece1ab46c7ea">openLedger</a>());</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keyword">auto</span> <span class="keyword">const</span> <a class="code" href="namespaceripple.html#a886ed36db831a964fc5f66ebbb4fe3d0">open</a> = env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ace0420a6e752f5dc5400df6f2097647e">current</a>();</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <a class="code" href="classripple_1_1OpenView.html">OpenView</a> v0(<a class="code" href="namespaceripple.html#a886ed36db831a964fc5f66ebbb4fe3d0">open</a>.get());</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            BEAST_EXPECT(v0.<a class="code" href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">seq</a>() != 98);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            BEAST_EXPECT(v0.<a class="code" href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">seq</a>() == <a class="code" href="namespaceripple.html#a886ed36db831a964fc5f66ebbb4fe3d0">open</a>-&gt;seq());</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            BEAST_EXPECT(v0.<a class="code" href="classripple_1_1ReadView.html#a1427aa6cbbda99c50b9ca0ebf6e0d0b3">parentCloseTime</a>() != <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/time_point.html">NetClock::time_point</a>{99s});</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            BEAST_EXPECT(v0.<a class="code" href="classripple_1_1ReadView.html#a1427aa6cbbda99c50b9ca0ebf6e0d0b3">parentCloseTime</a>() == <a class="code" href="namespaceripple.html#a886ed36db831a964fc5f66ebbb4fe3d0">open</a>-&gt;parentCloseTime());</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <span class="comment">// shallow copy</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <a class="code" href="classripple_1_1OpenView.html">OpenView</a> v1(v0);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                BEAST_EXPECT(v1.<a class="code" href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">seq</a>() == v0.<a class="code" href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">seq</a>());</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                BEAST_EXPECT(v1.<a class="code" href="classripple_1_1ReadView.html#a1427aa6cbbda99c50b9ca0ebf6e0d0b3">parentCloseTime</a>() == v1.<a class="code" href="classripple_1_1ReadView.html#a1427aa6cbbda99c50b9ca0ebf6e0d0b3">parentCloseTime</a>());</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <a class="code" href="classripple_1_1ApplyViewImpl.html">ApplyViewImpl</a> v2(&amp;v1, <a class="code" href="namespaceripple.html#ad2487abbcc1a5d6064b72144b461df6ead993a03ae0b72db5c62a616b69eaccff">tapRETRY</a>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                BEAST_EXPECT(v2.<a class="code" href="classripple_1_1ReadView.html#a1427aa6cbbda99c50b9ca0ebf6e0d0b3">parentCloseTime</a>() == v1.<a class="code" href="classripple_1_1ReadView.html#a1427aa6cbbda99c50b9ca0ebf6e0d0b3">parentCloseTime</a>());</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                BEAST_EXPECT(v2.<a class="code" href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">seq</a>() == v1.<a class="code" href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">seq</a>());</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                BEAST_EXPECT(v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ad615aed650814602031c446241bbca10">flags</a>() == <a class="code" href="namespaceripple.html#ad2487abbcc1a5d6064b72144b461df6ead993a03ae0b72db5c62a616b69eaccff">tapRETRY</a>);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <a class="code" href="classripple_1_1Sandbox.html">Sandbox</a> v3(&amp;v2);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                BEAST_EXPECT(v3.<a class="code" href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">seq</a>() == v2.<a class="code" href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">seq</a>());</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                BEAST_EXPECT(v3.<a class="code" href="classripple_1_1ReadView.html#a1427aa6cbbda99c50b9ca0ebf6e0d0b3">parentCloseTime</a>() == v2.<a class="code" href="classripple_1_1ReadView.html#a1427aa6cbbda99c50b9ca0ebf6e0d0b3">parentCloseTime</a>());</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                BEAST_EXPECT(v3.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ad615aed650814602031c446241bbca10">flags</a>() == <a class="code" href="namespaceripple.html#ad2487abbcc1a5d6064b72144b461df6ead993a03ae0b72db5c62a616b69eaccff">tapRETRY</a>);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                <a class="code" href="classripple_1_1ApplyViewImpl.html">ApplyViewImpl</a> v1(&amp;v0, <a class="code" href="namespaceripple.html#ad2487abbcc1a5d6064b72144b461df6ead993a03ae0b72db5c62a616b69eaccff">tapRETRY</a>);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                <a class="code" href="classripple_1_1PaymentSandbox.html">PaymentSandbox</a> v2(&amp;v1);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                BEAST_EXPECT(v2.<a class="code" href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">seq</a>() == v0.<a class="code" href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">seq</a>());</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                BEAST_EXPECT(v2.<a class="code" href="classripple_1_1ReadView.html#a1427aa6cbbda99c50b9ca0ebf6e0d0b3">parentCloseTime</a>() == v0.<a class="code" href="classripple_1_1ReadView.html#a1427aa6cbbda99c50b9ca0ebf6e0d0b3">parentCloseTime</a>());</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                BEAST_EXPECT(v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ad615aed650814602031c446241bbca10">flags</a>() == <a class="code" href="namespaceripple.html#ad2487abbcc1a5d6064b72144b461df6ead993a03ae0b72db5c62a616b69eaccff">tapRETRY</a>);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <a class="code" href="classripple_1_1PaymentSandbox.html">PaymentSandbox</a> v3(&amp;v2);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                BEAST_EXPECT(v3.<a class="code" href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">seq</a>() == v2.<a class="code" href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">seq</a>());</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                BEAST_EXPECT(v3.<a class="code" href="classripple_1_1ReadView.html#a1427aa6cbbda99c50b9ca0ebf6e0d0b3">parentCloseTime</a>() == v2.<a class="code" href="classripple_1_1ReadView.html#a1427aa6cbbda99c50b9ca0ebf6e0d0b3">parentCloseTime</a>());</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                BEAST_EXPECT(v3.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ad615aed650814602031c446241bbca10">flags</a>() == v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ad615aed650814602031c446241bbca10">flags</a>());</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// Return a list of keys found via sles</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keyword">static</span> <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;uint256&gt;</a></div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#a5dfd0fdb9b356eef5bbd29dd8522fb9a">  371</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#a5dfd0fdb9b356eef5bbd29dd8522fb9a">sles</a>(<a class="code" href="classripple_1_1ReadView.html">ReadView</a> <span class="keyword">const</span>&amp; ledger)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;uint256&gt;</a> v;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        v.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/reserve.html">reserve</a>(32);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; <a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a> : ledger.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            v.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/push_back.html">push_back</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>-&gt;key());</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">return</span> v;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">class</span>... Args&gt;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keyword">static</span> <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;uint256&gt;</a></div>
<div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#a5acb7e933c87c1312e227961646f7d62">  382</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#a5acb7e933c87c1312e227961646f7d62">list</a>(Args... args)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">return</span> <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;uint256&gt;</a>({<a class="code" href="namespaceripple.html#a356c68147333a9a48a344718038576d9">uint256</a>(args)...});</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#a261cf72736bc5e7664c277fa69e5c74a">  388</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#a261cf72736bc5e7664c277fa69e5c74a">testSles</a>()</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keyword">using namespace </span>jtx;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html">Env</a> env(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <a class="code" href="classripple_1_1Config.html">Config</a> config;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Ledger const&gt;</a> <span class="keyword">const</span> genesis = std::make_shared&lt;Ledger&gt;(</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <a class="code" href="namespaceripple.html#a2995be43488ad73c05c5541036d99d5a">create_genesis</a>,</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            config,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;uint256&gt;</a>{},</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a9e55bbdb66a785bfd0dda93802b514b6">app</a>().getNodeFamily());</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> ledger = std::make_shared&lt;Ledger&gt;(</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            *genesis, env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a9e55bbdb66a785bfd0dda93802b514b6">app</a>().<a class="code" href="classripple_1_1Application.html#a280004d4cce56d8f1ec4664950aa58d4">timeKeeper</a>().<a class="code" href="classripple_1_1TimeKeeper.html#a106491f0751b8c2c75978a4d1f7aa0e6">closeTime</a>());</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keyword">auto</span> setup123 = [&amp;ledger, <span class="keyword">this</span>]() {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="comment">// erase middle element</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#a6d746e59eef5e7c4144b2065ae6f7622">wipe</a>(*ledger);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            ledger-&gt;rawInsert(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(1));</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            ledger-&gt;rawInsert(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(2));</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            ledger-&gt;rawInsert(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(3));</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#a5dfd0fdb9b356eef5bbd29dd8522fb9a">sles</a>(*ledger) == <a class="code" href="classripple_1_1test_1_1View__test.html#a5acb7e933c87c1312e227961646f7d62">list</a>(1, 2, 3));</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        };</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            setup123();</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <a class="code" href="classripple_1_1OpenView.html">OpenView</a> view(ledger.get());</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ab8ec1fb6833f8962f766b214c580ab7b">rawErase</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(1));</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ad8795d23968108dca84420d2d25e1dd7">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(4));</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ad8795d23968108dca84420d2d25e1dd7">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(5));</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#a5dfd0fdb9b356eef5bbd29dd8522fb9a">sles</a>(view) == <a class="code" href="classripple_1_1test_1_1View__test.html#a5acb7e933c87c1312e227961646f7d62">list</a>(2, 3, 4, 5));</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keyword">auto</span> b = view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a7ab1d557a2540b693a7588a701a73825">begin</a>();</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(1)) == b);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            ++b;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(2)) == b);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            ++b;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(3)) == b);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            ++b;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(4)) == b);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            ++b;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(5)) == b);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            setup123();</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <a class="code" href="classripple_1_1OpenView.html">OpenView</a> view(ledger.get());</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ab8ec1fb6833f8962f766b214c580ab7b">rawErase</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(1));</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ab8ec1fb6833f8962f766b214c580ab7b">rawErase</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(2));</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ad8795d23968108dca84420d2d25e1dd7">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(4));</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ad8795d23968108dca84420d2d25e1dd7">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(5));</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#a5dfd0fdb9b356eef5bbd29dd8522fb9a">sles</a>(view) == <a class="code" href="classripple_1_1test_1_1View__test.html#a5acb7e933c87c1312e227961646f7d62">list</a>(3, 4, 5));</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="keyword">auto</span> b = view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a7ab1d557a2540b693a7588a701a73825">begin</a>();</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(1)) == b);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(2)) == b);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            ++b;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(3)) == b);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            ++b;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(4)) == b);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            ++b;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(5)) == b);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            setup123();</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <a class="code" href="classripple_1_1OpenView.html">OpenView</a> view(ledger.get());</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ab8ec1fb6833f8962f766b214c580ab7b">rawErase</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(1));</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ab8ec1fb6833f8962f766b214c580ab7b">rawErase</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(2));</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ab8ec1fb6833f8962f766b214c580ab7b">rawErase</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(3));</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ad8795d23968108dca84420d2d25e1dd7">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(4));</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ad8795d23968108dca84420d2d25e1dd7">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(5));</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#a5dfd0fdb9b356eef5bbd29dd8522fb9a">sles</a>(view) == <a class="code" href="classripple_1_1test_1_1View__test.html#a5acb7e933c87c1312e227961646f7d62">list</a>(4, 5));</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keyword">auto</span> b = view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a7ab1d557a2540b693a7588a701a73825">begin</a>();</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(1)) == b);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(2)) == b);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(3)) == b);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            ++b;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(4)) == b);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            ++b;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(5)) == b);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            setup123();</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <a class="code" href="classripple_1_1OpenView.html">OpenView</a> view(ledger.get());</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ab8ec1fb6833f8962f766b214c580ab7b">rawErase</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(3));</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ad8795d23968108dca84420d2d25e1dd7">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(4));</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ad8795d23968108dca84420d2d25e1dd7">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(5));</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#a5dfd0fdb9b356eef5bbd29dd8522fb9a">sles</a>(view) == <a class="code" href="classripple_1_1test_1_1View__test.html#a5acb7e933c87c1312e227961646f7d62">list</a>(1, 2, 4, 5));</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="keyword">auto</span> b = view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a7ab1d557a2540b693a7588a701a73825">begin</a>();</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            ++b;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(1)) == b);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            ++b;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(2)) == b);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(3)) == b);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            ++b;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(4)) == b);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            ++b;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(5)) == b);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            setup123();</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            <a class="code" href="classripple_1_1OpenView.html">OpenView</a> view(ledger.get());</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ad2a95c6fd9303d94164d55530cc1df39">rawReplace</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(1, 10));</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ad2a95c6fd9303d94164d55530cc1df39">rawReplace</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(3, 30));</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#a5dfd0fdb9b356eef5bbd29dd8522fb9a">sles</a>(view) == <a class="code" href="classripple_1_1test_1_1View__test.html#a5acb7e933c87c1312e227961646f7d62">list</a>(1, 2, 3));</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(view.<a class="code" href="classripple_1_1OpenView.html#ad31c6cb5856530ac7d72bf01fe780d43">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1))) == 10);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(view.<a class="code" href="classripple_1_1OpenView.html#ad31c6cb5856530ac7d72bf01fe780d43">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(2))) == 1);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">seq</a>(view.<a class="code" href="classripple_1_1OpenView.html#ad31c6cb5856530ac7d72bf01fe780d43">read</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(3))) == 30);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ab8ec1fb6833f8962f766b214c580ab7b">rawErase</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(3));</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#a5dfd0fdb9b356eef5bbd29dd8522fb9a">sles</a>(view) == <a class="code" href="classripple_1_1test_1_1View__test.html#a5acb7e933c87c1312e227961646f7d62">list</a>(1, 2));</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="keyword">auto</span> b = view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a7ab1d557a2540b693a7588a701a73825">begin</a>();</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            ++b;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(1)) == b);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            ++b;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(2)) == b);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(3)) == b);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(4)) == b);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(5)) == b);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ad8795d23968108dca84420d2d25e1dd7">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(5));</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ad8795d23968108dca84420d2d25e1dd7">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(4));</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            view.<a class="code" href="classripple_1_1OpenView.html#ad8795d23968108dca84420d2d25e1dd7">rawInsert</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(3));</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#a5dfd0fdb9b356eef5bbd29dd8522fb9a">sles</a>(view) == <a class="code" href="classripple_1_1test_1_1View__test.html#a5acb7e933c87c1312e227961646f7d62">list</a>(1, 2, 3, 4, 5));</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            b = view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a7ab1d557a2540b693a7588a701a73825">begin</a>();</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            ++b;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(1)) == b);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            ++b;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(2)) == b);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            ++b;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(3)) == b);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            ++b;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(4)) == b);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            ++b;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            BEAST_EXPECT(view.<a class="code" href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">sles</a>.<a class="code" href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">upper_bound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a>(5)) == b);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00520"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#afa58f7754681a17073636c71a01f3d04">  520</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#afa58f7754681a17073636c71a01f3d04">testFlags</a>()</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keyword">using namespace </span>jtx;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html">Env</a> env(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> alice = <a class="code" href="classripple_1_1test_1_1jtx_1_1Account.html">Account</a>(<span class="stringliteral">&quot;alice&quot;</span>);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> bob = <a class="code" href="classripple_1_1test_1_1jtx_1_1Account.html">Account</a>(<span class="stringliteral">&quot;bob&quot;</span>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> carol = <a class="code" href="classripple_1_1test_1_1jtx_1_1Account.html">Account</a>(<span class="stringliteral">&quot;carol&quot;</span>);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> gw = <a class="code" href="classripple_1_1test_1_1jtx_1_1Account.html">Account</a>(<span class="stringliteral">&quot;gateway&quot;</span>);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> USD = gw[<span class="stringliteral">&quot;USD&quot;</span>];</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> EUR = gw[<span class="stringliteral">&quot;EUR&quot;</span>];</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae2349266cb09d1f1c3de06606ebdf9e2">fund</a>(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">XRP</a>(10000), alice, bob, carol, gw);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a90fecf3c0f6cdc1c40761e19917bf65a">trust</a>(USD(100), alice, bob, carol);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            <span class="comment">// Global freezing.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            env(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a7816b23daf9b325ea1f88cc121a53d05">pay</a>(gw, alice, USD(50)));</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            env(offer(alice, <a class="code" href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">XRP</a>(5), USD(5)));</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            <span class="comment">// Now freeze gw.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            env(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a50cacef3867fc01273aa9c29231f9a7c">fset</a>(gw, <a class="code" href="namespaceripple.html#ad8cc3fc9a36fd58a5b39a5a600d8044c">asfGlobalFreeze</a>));</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            env(offer(alice, <a class="code" href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">XRP</a>(4), USD(5)), <a class="code" href="classripple_1_1test_1_1jtx_1_1ter.html">ter</a>(<a class="code" href="namespaceripple.html#aa298e929e02f59c2b05a30ee8805b38ca608da193a4a22ae1c78d76b6e843b7e6">tecFROZEN</a>));</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <span class="comment">// Alice&#39;s USD balance should be zero if frozen.</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            BEAST_EXPECT(</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                USD(0) ==</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                <a class="code" href="namespaceripple.html#ab001e43f50e612727b1ce5985a2770d6">accountHolds</a>(</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                    *env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>(),</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                    alice,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                    USD.currency,</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                    gw,</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    <a class="code" href="namespaceripple.html#a17a9a9b903b66e49f5413d82ce79f085a852cabbbe21a9b4d63aff777eceab2fd">fhZERO_IF_FROZEN</a>,</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                    env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#af238c2610022423bbbdbf9f493bc74e1">journal</a>));</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <span class="comment">// Thaw gw and try again.</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            env(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a18cde110bb3ad7dce97ac11a4b251d0e">fclear</a>(gw, <a class="code" href="namespaceripple.html#ad8cc3fc9a36fd58a5b39a5a600d8044c">asfGlobalFreeze</a>));</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            env(offer(<span class="stringliteral">&quot;alice&quot;</span>, <a class="code" href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">XRP</a>(4), USD(5)));</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="comment">// Local freezing.</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            env(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a7816b23daf9b325ea1f88cc121a53d05">pay</a>(gw, bob, USD(50)));</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="comment">// Now gw freezes bob&#39;s USD trust line.</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            env(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a47cac3a8bfbc8c14ae8da735ec52ebbf">trust</a>(gw, USD(100), bob, <a class="code" href="namespaceripple.html#a2ee664f6676eec21e5459ab18eddcfbb">tfSetFreeze</a>));</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            <span class="comment">// Bob&#39;s balance should be zero if frozen.</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            BEAST_EXPECT(</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                USD(0) ==</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                <a class="code" href="namespaceripple.html#ab001e43f50e612727b1ce5985a2770d6">accountHolds</a>(</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                    *env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>(),</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                    bob,</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                    USD.currency,</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                    gw,</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                    <a class="code" href="namespaceripple.html#a17a9a9b903b66e49f5413d82ce79f085a852cabbbe21a9b4d63aff777eceab2fd">fhZERO_IF_FROZEN</a>,</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                    env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#af238c2610022423bbbdbf9f493bc74e1">journal</a>));</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <span class="comment">// gw thaws bob&#39;s trust line.  bob gets his money back.</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            env(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a47cac3a8bfbc8c14ae8da735ec52ebbf">trust</a>(gw, USD(100), bob, <a class="code" href="namespaceripple.html#aa3057321859296e78b73d7e964ffbaed">tfClearFreeze</a>));</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            BEAST_EXPECT(</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                USD(50) ==</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                <a class="code" href="namespaceripple.html#ab001e43f50e612727b1ce5985a2770d6">accountHolds</a>(</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                    *env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>(),</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                    bob,</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                    USD.currency,</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                    gw,</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                    <a class="code" href="namespaceripple.html#a17a9a9b903b66e49f5413d82ce79f085a852cabbbe21a9b4d63aff777eceab2fd">fhZERO_IF_FROZEN</a>,</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                    env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#af238c2610022423bbbdbf9f493bc74e1">journal</a>));</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="comment">// accountHolds().</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            env(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a7816b23daf9b325ea1f88cc121a53d05">pay</a>(gw, carol, USD(50)));</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="comment">// carol has no EUR.</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            BEAST_EXPECT(</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                EUR(0) ==</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                <a class="code" href="namespaceripple.html#ab001e43f50e612727b1ce5985a2770d6">accountHolds</a>(</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                    *env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>(),</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                    carol,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                    EUR.currency,</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                    gw,</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                    <a class="code" href="namespaceripple.html#a17a9a9b903b66e49f5413d82ce79f085a852cabbbe21a9b4d63aff777eceab2fd">fhZERO_IF_FROZEN</a>,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                    env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#af238c2610022423bbbdbf9f493bc74e1">journal</a>));</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <span class="comment">// But carol does have USD.</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            BEAST_EXPECT(</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                USD(50) ==</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                <a class="code" href="namespaceripple.html#ab001e43f50e612727b1ce5985a2770d6">accountHolds</a>(</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                    *env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>(),</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                    carol,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                    USD.currency,</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                    gw,</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                    <a class="code" href="namespaceripple.html#a17a9a9b903b66e49f5413d82ce79f085a852cabbbe21a9b4d63aff777eceab2fd">fhZERO_IF_FROZEN</a>,</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                    env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#af238c2610022423bbbdbf9f493bc74e1">journal</a>));</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <span class="comment">// carol&#39;s XRP balance should be her holdings minus her reserve.</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <span class="keyword">auto</span> <span class="keyword">const</span> carolsXRP = <a class="code" href="namespaceripple.html#ab001e43f50e612727b1ce5985a2770d6">accountHolds</a>(</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                *env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>(),</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                carol,</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                <a class="code" href="namespaceripple.html#a91af9326e7f471001066b6b59f24599c">xrpCurrency</a>(),</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                <a class="code" href="namespaceripple.html#a21696ba0d0fac348f88f1b9da51091b0">xrpAccount</a>(),</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                <a class="code" href="namespaceripple.html#a17a9a9b903b66e49f5413d82ce79f085a852cabbbe21a9b4d63aff777eceab2fd">fhZERO_IF_FROZEN</a>,</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#af238c2610022423bbbdbf9f493bc74e1">journal</a>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <span class="comment">// carol&#39;s XRP balance:              10000</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="comment">// base reserve:                      -200</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <span class="comment">// 1 trust line times its reserve: 1 * -50</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <span class="comment">//                                 -------</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            <span class="comment">// carol&#39;s available balance:         9750</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            BEAST_EXPECT(carolsXRP == <a class="code" href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">XRP</a>(9750));</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            <span class="comment">// carol should be able to spend *more* than her XRP balance on</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="comment">// a fee by eating into her reserve.</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            env(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a95abf901db0a698e0c97d00476c95f34">noop</a>(carol), <a class="code" href="classripple_1_1test_1_1jtx_1_1fee.html">fee</a>(carolsXRP + <a class="code" href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">XRP</a>(10)));</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="comment">// carol&#39;s XRP balance should now show as zero.</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            BEAST_EXPECT(</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                <a class="code" href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">XRP</a>(0) ==</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <a class="code" href="namespaceripple.html#ab001e43f50e612727b1ce5985a2770d6">accountHolds</a>(</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                    *env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>(),</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                    carol,</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                    <a class="code" href="namespaceripple.html#a91af9326e7f471001066b6b59f24599c">xrpCurrency</a>(),</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                    gw,</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                    <a class="code" href="namespaceripple.html#a17a9a9b903b66e49f5413d82ce79f085a852cabbbe21a9b4d63aff777eceab2fd">fhZERO_IF_FROZEN</a>,</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                    env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#af238c2610022423bbbdbf9f493bc74e1">journal</a>));</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <span class="comment">// accountFunds().</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <span class="comment">// Gateways have whatever funds they claim to have.</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="keyword">auto</span> <span class="keyword">const</span> gwUSD = <a class="code" href="namespaceripple.html#a15bb971c7e554fc3df218aba54c33fcc">accountFunds</a>(</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                *env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>(), gw, USD(314159), <a class="code" href="namespaceripple.html#a17a9a9b903b66e49f5413d82ce79f085a852cabbbe21a9b4d63aff777eceab2fd">fhZERO_IF_FROZEN</a>, env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#af238c2610022423bbbdbf9f493bc74e1">journal</a>);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            BEAST_EXPECT(gwUSD == USD(314159));</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <span class="comment">// carol has funds from the gateway.</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="keyword">auto</span> carolsUSD = <a class="code" href="namespaceripple.html#a15bb971c7e554fc3df218aba54c33fcc">accountFunds</a>(</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                *env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>(), carol, USD(0), <a class="code" href="namespaceripple.html#a17a9a9b903b66e49f5413d82ce79f085a852cabbbe21a9b4d63aff777eceab2fd">fhZERO_IF_FROZEN</a>, env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#af238c2610022423bbbdbf9f493bc74e1">journal</a>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            BEAST_EXPECT(carolsUSD == USD(50));</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <span class="comment">// If carol&#39;s funds are frozen she has no funds...</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            env(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a50cacef3867fc01273aa9c29231f9a7c">fset</a>(gw, <a class="code" href="namespaceripple.html#ad8cc3fc9a36fd58a5b39a5a600d8044c">asfGlobalFreeze</a>));</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            carolsUSD = <a class="code" href="namespaceripple.html#a15bb971c7e554fc3df218aba54c33fcc">accountFunds</a>(</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                *env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>(), carol, USD(0), <a class="code" href="namespaceripple.html#a17a9a9b903b66e49f5413d82ce79f085a852cabbbe21a9b4d63aff777eceab2fd">fhZERO_IF_FROZEN</a>, env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#af238c2610022423bbbdbf9f493bc74e1">journal</a>);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            BEAST_EXPECT(carolsUSD == USD(0));</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            <span class="comment">// ... unless the query ignores the FROZEN state.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            carolsUSD = <a class="code" href="namespaceripple.html#a15bb971c7e554fc3df218aba54c33fcc">accountFunds</a>(</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                *env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>(), carol, USD(0), <a class="code" href="namespaceripple.html#a17a9a9b903b66e49f5413d82ce79f085a91e3c4f8089025c7ecf66dd62b822d90">fhIGNORE_FREEZE</a>, env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#af238c2610022423bbbdbf9f493bc74e1">journal</a>);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            BEAST_EXPECT(carolsUSD == USD(50));</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            <span class="comment">// Just to be tidy, thaw gw.</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            env(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a18cde110bb3ad7dce97ac11a4b251d0e">fclear</a>(gw, <a class="code" href="namespaceripple.html#ad8cc3fc9a36fd58a5b39a5a600d8044c">asfGlobalFreeze</a>));</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#af204bf82ad2d34c59e85af6b87b22434">  683</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#af204bf82ad2d34c59e85af6b87b22434">testTransferRate</a>()</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keyword">using namespace </span>jtx;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html">Env</a> env(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> gw1 = <a class="code" href="classripple_1_1test_1_1jtx_1_1Account.html">Account</a>(<span class="stringliteral">&quot;gw1&quot;</span>);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae2349266cb09d1f1c3de06606ebdf9e2">fund</a>(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">XRP</a>(10000), gw1);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keyword">auto</span> rdView = env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>();</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="comment">// Test with no rate set on gw1.</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        BEAST_EXPECT(<a class="code" href="namespaceripple.html#a9ad0749604cda5299e9af18bf08cb830">transferRate</a>(*rdView, gw1) == <a class="code" href="namespaceripple.html#a8ca9b43bfc508a3fdbc296fb926320ce">parityRate</a>);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        env(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a8e8d814b8820ce0b6979abde0d6a2618">rate</a>(gw1, 1.02));</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        rdView = env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>();</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        BEAST_EXPECT(<a class="code" href="namespaceripple.html#a9ad0749604cda5299e9af18bf08cb830">transferRate</a>(*rdView, gw1) == <a class="code" href="structripple_1_1Rate.html">Rate</a>{1020000000});</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#a212be5fd7a3dbc45131d1d3bdc4b307a">  705</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#a212be5fd7a3dbc45131d1d3bdc4b307a">testAreCompatible</a>()</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="comment">// This test requires incompatible ledgers.  The good news we can</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="comment">// construct and manage two different Env instances at the same</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="comment">// time.  So we can use two Env instances to produce mutually</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="comment">// incompatible ledgers.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keyword">using namespace </span>jtx;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> alice = <a class="code" href="classripple_1_1test_1_1jtx_1_1Account.html">Account</a>(<span class="stringliteral">&quot;alice&quot;</span>);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> bob = <a class="code" href="classripple_1_1test_1_1jtx_1_1Account.html">Account</a>(<span class="stringliteral">&quot;bob&quot;</span>);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="comment">// The first Env.</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html">Env</a> eA(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        eA.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae2349266cb09d1f1c3de06606ebdf9e2">fund</a>(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">XRP</a>(10000), alice);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        eA.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> rdViewA3 = eA.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>();</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        eA.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae2349266cb09d1f1c3de06606ebdf9e2">fund</a>(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">XRP</a>(10000), bob);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        eA.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">close</a>();</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> rdViewA4 = eA.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">closed</a>();</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="comment">// The two Env&#39;s can&#39;t share the same ports, so modifiy the config</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="comment">// of the second Env to use higher port numbers</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html">Env</a> eB{*<span class="keyword">this</span>, <a class="code" href="namespaceripple_1_1test_1_1jtx.html#a287cf5b6a71db097fe1678c88926efb4">envconfig</a>(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a5f29996e384091b64ee6d78358afdc3f">port_increment</a>, 3)};</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="comment">// Make ledgers that are incompatible with the first ledgers.  Note</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="comment">// that bob is funded before alice.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        eB.fund(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">XRP</a>(10000), bob);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        eB.close();</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> rdViewB3 = eB.closed();</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        eB.fund(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">XRP</a>(10000), alice);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        eB.close();</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> rdViewB4 = eB.closed();</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="comment">// Check for compatibility.</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keyword">auto</span> jStream = eA.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#af238c2610022423bbbdbf9f493bc74e1">journal</a>.<a class="code" href="classbeast_1_1Journal.html#a49b0713e65bb8e2c51b76fbf16252afe">error</a>();</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        BEAST_EXPECT(<a class="code" href="namespaceripple.html#ae93a0ce909950194e6f9aaed7579ea74">areCompatible</a>(*rdViewA3, *rdViewA4, jStream, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        BEAST_EXPECT(<a class="code" href="namespaceripple.html#ae93a0ce909950194e6f9aaed7579ea74">areCompatible</a>(*rdViewA4, *rdViewA3, jStream, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        BEAST_EXPECT(<a class="code" href="namespaceripple.html#ae93a0ce909950194e6f9aaed7579ea74">areCompatible</a>(*rdViewA4, *rdViewA4, jStream, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        BEAST_EXPECT(!<a class="code" href="namespaceripple.html#ae93a0ce909950194e6f9aaed7579ea74">areCompatible</a>(*rdViewA3, *rdViewB4, jStream, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        BEAST_EXPECT(!<a class="code" href="namespaceripple.html#ae93a0ce909950194e6f9aaed7579ea74">areCompatible</a>(*rdViewA4, *rdViewB3, jStream, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        BEAST_EXPECT(!<a class="code" href="namespaceripple.html#ae93a0ce909950194e6f9aaed7579ea74">areCompatible</a>(*rdViewA4, *rdViewB4, jStream, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="comment">// Try the other interface.</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <span class="comment">// Note that the different interface has different outcomes.</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span>&amp; iA3 = rdViewA3-&gt;info();</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span>&amp; iA4 = rdViewA4-&gt;info();</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        BEAST_EXPECT(<a class="code" href="namespaceripple.html#ae93a0ce909950194e6f9aaed7579ea74">areCompatible</a>(iA3.hash, iA3.seq, *rdViewA4, jStream, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        BEAST_EXPECT(<a class="code" href="namespaceripple.html#ae93a0ce909950194e6f9aaed7579ea74">areCompatible</a>(iA4.hash, iA4.seq, *rdViewA3, jStream, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        BEAST_EXPECT(<a class="code" href="namespaceripple.html#ae93a0ce909950194e6f9aaed7579ea74">areCompatible</a>(iA4.hash, iA4.seq, *rdViewA4, jStream, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        BEAST_EXPECT(!<a class="code" href="namespaceripple.html#ae93a0ce909950194e6f9aaed7579ea74">areCompatible</a>(iA3.hash, iA3.seq, *rdViewB4, jStream, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        BEAST_EXPECT(<a class="code" href="namespaceripple.html#ae93a0ce909950194e6f9aaed7579ea74">areCompatible</a>(iA4.hash, iA4.seq, *rdViewB3, jStream, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        BEAST_EXPECT(!<a class="code" href="namespaceripple.html#ae93a0ce909950194e6f9aaed7579ea74">areCompatible</a>(iA4.hash, iA4.seq, *rdViewB4, jStream, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00763"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#a876d0b6d69f1e6ce68f8fa1a804e4174">  763</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#a876d0b6d69f1e6ce68f8fa1a804e4174">testRegressions</a>()</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keyword">using namespace </span>jtx;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="comment">// Create a ledger with 1 item, put a</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="comment">// ApplyView on that, then another ApplyView,</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="comment">// erase the item, apply.</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html">Env</a> env(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <a class="code" href="classripple_1_1Config.html">Config</a> config;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Ledger const&gt;</a> <span class="keyword">const</span> genesis =</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                std::make_shared&lt;Ledger&gt;(</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                    <a class="code" href="namespaceripple.html#a2995be43488ad73c05c5541036d99d5a">create_genesis</a>,</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                    config,</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                    <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;uint256&gt;</a>{},</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                    env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a9e55bbdb66a785bfd0dda93802b514b6">app</a>().getNodeFamily());</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            <span class="keyword">auto</span> <span class="keyword">const</span> ledger = std::make_shared&lt;Ledger&gt;(</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                *genesis, env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a9e55bbdb66a785bfd0dda93802b514b6">app</a>().<a class="code" href="classripple_1_1Application.html#a280004d4cce56d8f1ec4664950aa58d4">timeKeeper</a>().<a class="code" href="classripple_1_1TimeKeeper.html#a106491f0751b8c2c75978a4d1f7aa0e6">closeTime</a>());</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <a class="code" href="classripple_1_1test_1_1View__test.html#a6d746e59eef5e7c4144b2065ae6f7622">wipe</a>(*ledger);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            ledger-&gt;rawInsert(<a class="code" href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">sle</a>(1));</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            <a class="code" href="classripple_1_1ReadView.html">ReadView</a>&amp; v0 = *ledger;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            <a class="code" href="classripple_1_1ApplyViewImpl.html">ApplyViewImpl</a> v1(&amp;v0, <a class="code" href="namespaceripple.html#ad2487abbcc1a5d6064b72144b461df6eaf77cbea9706ce2ee7fdf5a85efbf70c5">tapNONE</a>);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                <a class="code" href="classripple_1_1Sandbox.html">Sandbox</a> v2(&amp;v1);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#a165c96d3bf59c98b608ffabcf2f70276">erase</a>(v2.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#afe88196d7aec85f2af00d7cd0b1a28c3">peek</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1)));</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                v2.<a class="code" href="classripple_1_1Sandbox.html#af027065a92ed80c4b54b08d7974c06ce">apply</a>(v1);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            BEAST_EXPECT(!v1.<a class="code" href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">exists</a>(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1)));</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <span class="comment">// Make sure OpenLedger::empty works</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html">Env</a> env(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            BEAST_EXPECT(env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a9e55bbdb66a785bfd0dda93802b514b6">app</a>().<a class="code" href="classripple_1_1Application.html#a002e22abe4c34d378ff9ece1ab46c7ea">openLedger</a>().<a class="code" href="classripple_1_1OpenLedger.html#a88144aac5696b3f33eccfaaed0aeb8ba">empty</a>());</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#ae2349266cb09d1f1c3de06606ebdf9e2">fund</a>(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">XRP</a>(10000), <a class="code" href="classripple_1_1test_1_1jtx_1_1Account.html">Account</a>(<span class="stringliteral">&quot;test&quot;</span>));</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            BEAST_EXPECT(!env.<a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html#a9e55bbdb66a785bfd0dda93802b514b6">app</a>().<a class="code" href="classripple_1_1Application.html#a002e22abe4c34d378ff9ece1ab46c7ea">openLedger</a>().<a class="code" href="classripple_1_1OpenLedger.html#a88144aac5696b3f33eccfaaed0aeb8ba">empty</a>());</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00803"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1View__test.html#ac4dc08fbd79cdefb231b58455da628dd">  803</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1View__test.html#ac4dc08fbd79cdefb231b58455da628dd">run</a>()<span class="keyword"> override</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <span class="comment">// This had better work, or else</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        BEAST_EXPECT(<a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(0).key &lt; <a class="code" href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">k</a>(1).key);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160; </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#a4af3a487d399abe48fef4e8dff23ac99">testLedger</a>();</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#ad7d00b70c5c289d33d40aefeb9af5beb">testMeta</a>();</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#a24a0161bd55353bc9815d918eca70fd2">testMetaSucc</a>();</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#ab548fbc346788e353914d76482acfbc6">testStacked</a>();</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#a0e8e994b5cdd90ed5c9ceb881902c775">testContext</a>();</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#a261cf72736bc5e7664c277fa69e5c74a">testSles</a>();</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#afa58f7754681a17073636c71a01f3d04">testFlags</a>();</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#af204bf82ad2d34c59e85af6b87b22434">testTransferRate</a>();</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#a212be5fd7a3dbc45131d1d3bdc4b307a">testAreCompatible</a>();</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <a class="code" href="classripple_1_1test_1_1View__test.html#a876d0b6d69f1e6ce68f8fa1a804e4174">testRegressions</a>();</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;};</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1GetAmendments__test.html">  821</a></span>&#160;<span class="keyword">class </span><a class="code" href="classripple_1_1test_1_1GetAmendments__test.html">GetAmendments_test</a> : <span class="keyword">public</span> beast::unit_test::suite</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;{</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00824"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1GetAmendments__test.html#a07fe3d47cbade85144ebe7f90bf2dad1">  824</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1GetAmendments__test.html#a07fe3d47cbade85144ebe7f90bf2dad1">testGetAmendments</a>()</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <span class="keyword">using namespace </span>jtx;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <a class="code" href="classripple_1_1test_1_1jtx_1_1Env.html">Env</a> env{*<span class="keyword">this</span>, <a class="code" href="namespaceripple_1_1test_1_1jtx.html#a287cf5b6a71db097fe1678c88926efb4">envconfig</a>(<a class="code" href="namespaceripple_1_1test_1_1jtx.html#a000ffa48b8512f4af030e7fd63c26cad">validator</a>, <span class="stringliteral">&quot;&quot;</span>)};</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="comment">// Start out with no amendments.</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keyword">auto</span> majorities = <a class="code" href="namespaceripple.html#ab6b00b336996c0b0a3fe2e8a8d5fa76a">getMajorityAmendments</a>(*env.closed());</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        BEAST_EXPECT(majorities.empty());</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="comment">// Now close ledgers until the amendments show up.</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt;= 256; ++i)</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            env.close();</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            majorities = <a class="code" href="namespaceripple.html#ab6b00b336996c0b0a3fe2e8a8d5fa76a">getMajorityAmendments</a>(*env.closed());</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            <span class="keywordflow">if</span> (!majorities.empty())</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="comment">// There should be at least 5 amendments.  Don&#39;t do exact comparison</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="comment">// to avoid maintenance as more amendments are added in the future.</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        BEAST_EXPECT(i == 254);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        BEAST_EXPECT(majorities.size() &gt;= 5);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="comment">// None of the amendments should be enabled yet.</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keyword">auto</span> enableds = <a class="code" href="namespaceripple.html#a6f8b0cab74710c17299c1d37f3e05b48">getEnabledAmendments</a>(*env.closed());</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        BEAST_EXPECT(enableds.empty());</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="comment">// Now wait 2 weeks modulo 256 ledgers for the amendments to be</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="comment">// enabled.  Speed the process by closing ledgers every 80 minutes,</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="comment">// which should get us to just past 2 weeks after 256 ledgers.</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt;= 256; ++i)</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <span class="keyword">using namespace </span>std::chrono_literals;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            env.close(80min);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            enableds = <a class="code" href="namespaceripple.html#a6f8b0cab74710c17299c1d37f3e05b48">getEnabledAmendments</a>(*env.closed());</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <span class="keywordflow">if</span> (!enableds.empty())</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        BEAST_EXPECT(i == 255);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        BEAST_EXPECT(enableds.size() &gt;= 5);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    }</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160; </div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00868"></a><span class="lineno"><a class="line" href="classripple_1_1test_1_1GetAmendments__test.html#aad102a9976dc4ac9f7b2c3d75c6c343a">  868</a></span>&#160;    <a class="code" href="classripple_1_1test_1_1GetAmendments__test.html#aad102a9976dc4ac9f7b2c3d75c6c343a">run</a>()<span class="keyword"> override</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        testGetAmendments();</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;};</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<a class="code" href="namespaceripple_1_1test.html#a52909fdbfa7f29626f24005ed12e6ef4">BEAST_DEFINE_TESTSUITE</a>(View, ledger, <a class="code" href="namespaceripple.html">ripple</a>);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<a class="code" href="namespaceripple_1_1test.html#a52909fdbfa7f29626f24005ed12e6ef4">BEAST_DEFINE_TESTSUITE</a>(GetAmendments, ledger, <a class="code" href="namespaceripple.html">ripple</a>);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;}  <span class="comment">// namespace test</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;}  <span class="comment">// namespace ripple</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_a24a0161bd55353bc9815d918eca70fd2"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#a24a0161bd55353bc9815d918eca70fd2">ripple::test::View_test::testMetaSucc</a></div><div class="ttdeci">void testMetaSucc()</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00197">View_test.cpp:197</a></div></div>
<div class="ttc" id="anamespaceripple_html_a9ad0749604cda5299e9af18bf08cb830"><div class="ttname"><a href="namespaceripple.html#a9ad0749604cda5299e9af18bf08cb830">ripple::transferRate</a></div><div class="ttdeci">Rate transferRate(ReadView const &amp;view, AccountID const &amp;issuer)</div><div class="ttdef"><b>Definition:</b> <a href="View_8cpp_source.html#l00347">View.cpp:347</a></div></div>
<div class="ttc" id="anamespaceripple_1_1test_1_1jtx_html_a95abf901db0a698e0c97d00476c95f34"><div class="ttname"><a href="namespaceripple_1_1test_1_1jtx.html#a95abf901db0a698e0c97d00476c95f34">ripple::test::jtx::noop</a></div><div class="ttdeci">Json::Value noop(Account const &amp;account)</div><div class="ttdoc">The null transaction.</div><div class="ttdef"><b>Definition:</b> <a href="noop_8h_source.html#l00031">noop.h:31</a></div></div>
<div class="ttc" id="anamespaceripple_html_aa298e929e02f59c2b05a30ee8805b38ca608da193a4a22ae1c78d76b6e843b7e6"><div class="ttname"><a href="namespaceripple.html#aa298e929e02f59c2b05a30ee8805b38ca608da193a4a22ae1c78d76b6e843b7e6">ripple::tecFROZEN</a></div><div class="ttdeci">@ tecFROZEN</div><div class="ttdef"><b>Definition:</b> <a href="TER_8h_source.html#l00261">TER.h:261</a></div></div>
<div class="ttc" id="anamespaceripple_html_ab6b00b336996c0b0a3fe2e8a8d5fa76a"><div class="ttname"><a href="namespaceripple.html#ab6b00b336996c0b0a3fe2e8a8d5fa76a">ripple::getMajorityAmendments</a></div><div class="ttdeci">majorityAmendments_t getMajorityAmendments(ReadView const &amp;view)</div><div class="ttdef"><b>Definition:</b> <a href="View_8cpp_source.html#l00550">View.cpp:550</a></div></div>
<div class="ttc" id="anamespaceripple_1_1test_1_1jtx_html_a37cf35ddf6bc8f4c6cbfa3fba57d6815"><div class="ttname"><a href="namespaceripple_1_1test_1_1jtx.html#a37cf35ddf6bc8f4c6cbfa3fba57d6815">ripple::test::jtx::XRP</a></div><div class="ttdeci">const XRP_t XRP</div><div class="ttdoc">Converts to XRP Issue or STAmount.</div><div class="ttdef"><b>Definition:</b> <a href="amount_8cpp_source.html#l00105">amount.cpp:105</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_afa58f7754681a17073636c71a01f3d04"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#afa58f7754681a17073636c71a01f3d04">ripple::test::View_test::testFlags</a></div><div class="ttdeci">void testFlags()</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00520">View_test.cpp:520</a></div></div>
<div class="ttc" id="astructripple_1_1Keylet_html"><div class="ttname"><a href="structripple_1_1Keylet.html">ripple::Keylet</a></div><div class="ttdoc">A pair of SHAMap key and LedgerEntryType.</div><div class="ttdef"><b>Definition:</b> <a href="Keylet_8h_source.html#l00038">Keylet.h:38</a></div></div>
<div class="ttc" id="anamespaceripple_html_a6f8b0cab74710c17299c1d37f3e05b48"><div class="ttname"><a href="namespaceripple.html#a6f8b0cab74710c17299c1d37f3e05b48">ripple::getEnabledAmendments</a></div><div class="ttdeci">std::set&lt; uint256 &gt; getEnabledAmendments(ReadView const &amp;view)</div><div class="ttdef"><b>Definition:</b> <a href="View_8cpp_source.html#l00533">View.cpp:533</a></div></div>
<div class="ttc" id="anamespaceripple_1_1test_html_a52909fdbfa7f29626f24005ed12e6ef4"><div class="ttname"><a href="namespaceripple_1_1test.html#a52909fdbfa7f29626f24005ed12e6ef4">ripple::test::BEAST_DEFINE_TESTSUITE</a></div><div class="ttdeci">BEAST_DEFINE_TESTSUITE(AccountDelete, app, ripple)</div></div>
<div class="ttc" id="ashared_ptr_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr</a></div><div class="ttdoc">STL class.</div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_a14d9c2a98db10bbe288ba36d73740e75"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#a14d9c2a98db10bbe288ba36d73740e75">ripple::test::View_test::seq</a></div><div class="ttdeci">static void seq(std::shared_ptr&lt; SLE &gt; const &amp;le, std::uint32_t seq)</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00062">View_test.cpp:62</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1GetAmendments__test_html"><div class="ttname"><a href="classripple_1_1test_1_1GetAmendments__test.html">ripple::test::GetAmendments_test</a></div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00821">View_test.cpp:821</a></div></div>
<div class="ttc" id="anamespaceripple_html_a17a9a9b903b66e49f5413d82ce79f085a852cabbbe21a9b4d63aff777eceab2fd"><div class="ttname"><a href="namespaceripple.html#a17a9a9b903b66e49f5413d82ce79f085a852cabbbe21a9b4d63aff777eceab2fd">ripple::fhZERO_IF_FROZEN</a></div><div class="ttdeci">@ fhZERO_IF_FROZEN</div><div class="ttdef"><b>Definition:</b> <a href="View_8h_source.html#l00053">View.h:53</a></div></div>
<div class="ttc" id="astructripple_1_1Rate_html"><div class="ttname"><a href="structripple_1_1Rate.html">ripple::Rate</a></div><div class="ttdoc">Represents a transfer rate.</div><div class="ttdef"><b>Definition:</b> <a href="Rate_8h_source.html#l00037">Rate.h:37</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1jtx_1_1ter_html"><div class="ttname"><a href="classripple_1_1test_1_1jtx_1_1ter.html">ripple::test::jtx::ter</a></div><div class="ttdoc">Set the expected result code for a JTx The test will fail if the code doesn't match.</div><div class="ttdef"><b>Definition:</b> <a href="ter_8h_source.html#l00033">ter.h:33</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_af204bf82ad2d34c59e85af6b87b22434"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#af204bf82ad2d34c59e85af6b87b22434">ripple::test::View_test::testTransferRate</a></div><div class="ttdeci">void testTransferRate()</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00683">View_test.cpp:683</a></div></div>
<div class="ttc" id="aclassripple_1_1PaymentSandbox_html"><div class="ttname"><a href="classripple_1_1PaymentSandbox.html">ripple::PaymentSandbox</a></div><div class="ttdoc">A wrapper which makes credits unavailable to balances.</div><div class="ttdef"><b>Definition:</b> <a href="PaymentSandbox_8h_source.html#l00112">PaymentSandbox.h:112</a></div></div>
<div class="ttc" id="aclassripple_1_1Sandbox_html_af027065a92ed80c4b54b08d7974c06ce"><div class="ttname"><a href="classripple_1_1Sandbox.html#af027065a92ed80c4b54b08d7974c06ce">ripple::Sandbox::apply</a></div><div class="ttdeci">void apply(RawView &amp;to)</div><div class="ttdef"><b>Definition:</b> <a href="Sandbox_8h_source.html#l00055">Sandbox.h:55</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1jtx_1_1Env_html_ae449949223905ec9bd5b8dbc1c9e9ded"><div class="ttname"><a href="classripple_1_1test_1_1jtx_1_1Env.html#ae449949223905ec9bd5b8dbc1c9e9ded">ripple::test::jtx::Env::closed</a></div><div class="ttdeci">std::shared_ptr&lt; ReadView const  &gt; closed()</div><div class="ttdoc">Returns the last closed ledger.</div><div class="ttdef"><b>Definition:</b> <a href="Env_8cpp_source.html#l00115">Env.cpp:115</a></div></div>
<div class="ttc" id="areserve_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector/reserve.html">std::vector::reserve</a></div><div class="ttdeci">T reserve(T... args)</div></div>
<div class="ttc" id="aclassripple_1_1OpenView_html"><div class="ttname"><a href="classripple_1_1OpenView.html">ripple::OpenView</a></div><div class="ttdoc">Writable ledger view that accumulates state and tx changes.</div><div class="ttdef"><b>Definition:</b> <a href="OpenView_8h_source.html#l00052">OpenView.h:52</a></div></div>
<div class="ttc" id="anamespaceripple_html_ad8cc3fc9a36fd58a5b39a5a600d8044c"><div class="ttname"><a href="namespaceripple.html#ad8cc3fc9a36fd58a5b39a5a600d8044c">ripple::asfGlobalFreeze</a></div><div class="ttdeci">const std::uint32_t asfGlobalFreeze</div><div class="ttdef"><b>Definition:</b> <a href="TxFlags_8h_source.html#l00071">TxFlags.h:71</a></div></div>
<div class="ttc" id="aclassripple_1_1OpenView_html_ab8ec1fb6833f8962f766b214c580ab7b"><div class="ttname"><a href="classripple_1_1OpenView.html#ab8ec1fb6833f8962f766b214c580ab7b">ripple::OpenView::rawErase</a></div><div class="ttdeci">void rawErase(std::shared_ptr&lt; SLE &gt; const &amp;sle) override</div><div class="ttdoc">Delete an existing state item.</div><div class="ttdef"><b>Definition:</b> <a href="OpenView_8cpp_source.html#l00210">OpenView.cpp:210</a></div></div>
<div class="ttc" id="anamespaceripple_1_1test_1_1jtx_html_a000ffa48b8512f4af030e7fd63c26cad"><div class="ttname"><a href="namespaceripple_1_1test_1_1jtx.html#a000ffa48b8512f4af030e7fd63c26cad">ripple::test::jtx::validator</a></div><div class="ttdeci">std::unique_ptr&lt; Config &gt; validator(std::unique_ptr&lt; Config &gt;, std::string const &amp;)</div><div class="ttdoc">adjust configuration with params needed to be a validator</div><div class="ttdef"><b>Definition:</b> <a href="envconfig_8cpp_source.html#l00089">envconfig.cpp:89</a></div></div>
<div class="ttc" id="aclassripple_1_1detail_1_1ApplyViewBase_html_ab5b90b656223e19272dfe10e2dcd7f56"><div class="ttname"><a href="classripple_1_1detail_1_1ApplyViewBase.html#ab5b90b656223e19272dfe10e2dcd7f56">ripple::detail::ApplyViewBase::exists</a></div><div class="ttdeci">bool exists(Keylet const &amp;k) const override</div><div class="ttdoc">Determine if a state item exists.</div><div class="ttdef"><b>Definition:</b> <a href="ApplyViewBase_8cpp_source.html#l00059">ApplyViewBase.cpp:59</a></div></div>
<div class="ttc" id="avector_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector</a></div><div class="ttdoc">STL class.</div></div>
<div class="ttc" id="anamespaceripple_html_a75d94908bf27ab4f7ec61a457e52ee8e"><div class="ttname"><a href="namespaceripple.html#a75d94908bf27ab4f7ec61a457e52ee8e">ripple::sfSequence</a></div><div class="ttdeci">const SF_U32 sfSequence(access, STI_UINT32, 4, &quot;Sequence&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="SField_8h_source.html#l00356">SField.h:356</a></div></div>
<div class="ttc" id="anamespaceripple_1_1test_1_1jtx_html_a47cac3a8bfbc8c14ae8da735ec52ebbf"><div class="ttname"><a href="namespaceripple_1_1test_1_1jtx.html#a47cac3a8bfbc8c14ae8da735ec52ebbf">ripple::test::jtx::trust</a></div><div class="ttdeci">Json::Value trust(Account const &amp;account, STAmount const &amp;amount, std::uint32_t flags)</div><div class="ttdoc">Modify a trust line.</div><div class="ttdef"><b>Definition:</b> <a href="trust_8cpp_source.html#l00030">trust.cpp:30</a></div></div>
<div class="ttc" id="anamespaceripple_html_ab001e43f50e612727b1ce5985a2770d6"><div class="ttname"><a href="namespaceripple.html#ab001e43f50e612727b1ce5985a2770d6">ripple::accountHolds</a></div><div class="ttdeci">STAmount accountHolds(ReadView const &amp;view, AccountID const &amp;account, Currency const &amp;currency, AccountID const &amp;issuer, FreezeHandling zeroIfFrozen, beast::Journal j)</div><div class="ttdef"><b>Definition:</b> <a href="View_8cpp_source.html#l00092">View.cpp:92</a></div></div>
<div class="ttc" id="aclassripple_1_1detail_1_1ApplyViewBase_html_a4f12513f46ee2c194d6fb0e4d28e5543"><div class="ttname"><a href="classripple_1_1detail_1_1ApplyViewBase.html#a4f12513f46ee2c194d6fb0e4d28e5543">ripple::detail::ApplyViewBase::update</a></div><div class="ttdeci">void update(std::shared_ptr&lt; SLE &gt; const &amp;sle) override</div><div class="ttdoc">Indicate changes to a peeked SLE.</div><div class="ttdef"><b>Definition:</b> <a href="ApplyViewBase_8cpp_source.html#l00147">ApplyViewBase.cpp:147</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_a261cf72736bc5e7664c277fa69e5c74a"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#a261cf72736bc5e7664c277fa69e5c74a">ripple::test::View_test::testSles</a></div><div class="ttdeci">void testSles()</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00388">View_test.cpp:388</a></div></div>
<div class="ttc" id="anamespaceripple_1_1test_1_1jtx_html_a5f29996e384091b64ee6d78358afdc3f"><div class="ttname"><a href="namespaceripple_1_1test_1_1jtx.html#a5f29996e384091b64ee6d78358afdc3f">ripple::test::jtx::port_increment</a></div><div class="ttdeci">std::unique_ptr&lt; Config &gt; port_increment(std::unique_ptr&lt; Config &gt;, int)</div><div class="ttdoc">adjust the default configured server ports by a specified value</div><div class="ttdef"><b>Definition:</b> <a href="envconfig_8cpp_source.html#l00098">envconfig.cpp:98</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1jtx_1_1Env_html_af238c2610022423bbbdbf9f493bc74e1"><div class="ttname"><a href="classripple_1_1test_1_1jtx_1_1Env.html#af238c2610022423bbbdbf9f493bc74e1">ripple::test::jtx::Env::journal</a></div><div class="ttdeci">const beast::Journal journal</div><div class="ttdef"><b>Definition:</b> <a href="Env_8h_source.html#l00143">Env.h:143</a></div></div>
<div class="ttc" id="astructripple_1_1ReadView_1_1sles__type_html_a05daad767debdf8aa83c87cd5328916d"><div class="ttname"><a href="structripple_1_1ReadView_1_1sles__type.html#a05daad767debdf8aa83c87cd5328916d">ripple::ReadView::sles_type::upper_bound</a></div><div class="ttdeci">iterator upper_bound(key_type const &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8cpp_source.html#l00146">ReadView.cpp:146</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1jtx_1_1Env_html_a9e55bbdb66a785bfd0dda93802b514b6"><div class="ttname"><a href="classripple_1_1test_1_1jtx_1_1Env.html#a9e55bbdb66a785bfd0dda93802b514b6">ripple::test::jtx::Env::app</a></div><div class="ttdeci">Application &amp; app()</div><div class="ttdef"><b>Definition:</b> <a href="Env_8h_source.html#l00240">Env.h:240</a></div></div>
<div class="ttc" id="aclassripple_1_1ApplyViewImpl_html"><div class="ttname"><a href="classripple_1_1ApplyViewImpl.html">ripple::ApplyViewImpl</a></div><div class="ttdoc">Editable, discardable view that can build metadata for one tx.</div><div class="ttdef"><b>Definition:</b> <a href="ApplyViewImpl_8h_source.html#l00037">ApplyViewImpl.h:37</a></div></div>
<div class="ttc" id="aclassripple_1_1Application_html_a280004d4cce56d8f1ec4664950aa58d4"><div class="ttname"><a href="classripple_1_1Application.html#a280004d4cce56d8f1ec4664950aa58d4">ripple::Application::timeKeeper</a></div><div class="ttdeci">virtual TimeKeeper &amp; timeKeeper()=0</div></div>
<div class="ttc" id="anamespaceripple_1_1test_1_1jtx_html_a287cf5b6a71db097fe1678c88926efb4"><div class="ttname"><a href="namespaceripple_1_1test_1_1jtx.html#a287cf5b6a71db097fe1678c88926efb4">ripple::test::jtx::envconfig</a></div><div class="ttdeci">std::unique_ptr&lt; Config &gt; envconfig()</div><div class="ttdoc">creates and initializes a default configuration for jtx::Env</div><div class="ttdef"><b>Definition:</b> <a href="envconfig_8h_source.html#l00049">envconfig.h:49</a></div></div>
<div class="ttc" id="anamespaceripple_html_aa3057321859296e78b73d7e964ffbaed"><div class="ttname"><a href="namespaceripple.html#aa3057321859296e78b73d7e964ffbaed">ripple::tfClearFreeze</a></div><div class="ttdeci">const std::uint32_t tfClearFreeze</div><div class="ttdef"><b>Definition:</b> <a href="TxFlags_8h_source.html#l00095">TxFlags.h:95</a></div></div>
<div class="ttc" id="aclassripple_1_1Application_html_a002e22abe4c34d378ff9ece1ab46c7ea"><div class="ttname"><a href="classripple_1_1Application.html#a002e22abe4c34d378ff9ece1ab46c7ea">ripple::Application::openLedger</a></div><div class="ttdeci">virtual OpenLedger &amp; openLedger()=0</div></div>
<div class="ttc" id="aclassripple_1_1ReadView_html_a1427aa6cbbda99c50b9ca0ebf6e0d0b3"><div class="ttname"><a href="classripple_1_1ReadView.html#a1427aa6cbbda99c50b9ca0ebf6e0d0b3">ripple::ReadView::parentCloseTime</a></div><div class="ttdeci">NetClock::time_point parentCloseTime() const</div><div class="ttdoc">Returns the close time of the previous ledger.</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00249">ReadView.h:249</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_a5dfd0fdb9b356eef5bbd29dd8522fb9a"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#a5dfd0fdb9b356eef5bbd29dd8522fb9a">ripple::test::View_test::sles</a></div><div class="ttdeci">static std::vector&lt; uint256 &gt; sles(ReadView const &amp;ledger)</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00371">View_test.cpp:371</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a27f6d838768ff645f63dbbca85160ab7"><div class="ttname"><a href="classripple_1_1Ledger.html#a27f6d838768ff645f63dbbca85160ab7">ripple::Ledger::rawErase</a></div><div class="ttdeci">void rawErase(std::shared_ptr&lt; SLE &gt; const &amp;sle) override</div><div class="ttdoc">Delete an existing state item.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00491">Ledger.cpp:491</a></div></div>
<div class="ttc" id="anamespaceripple_html_ad2487abbcc1a5d6064b72144b461df6eaf77cbea9706ce2ee7fdf5a85efbf70c5"><div class="ttname"><a href="namespaceripple.html#ad2487abbcc1a5d6064b72144b461df6eaf77cbea9706ce2ee7fdf5a85efbf70c5">ripple::tapNONE</a></div><div class="ttdeci">@ tapNONE</div><div class="ttdef"><b>Definition:</b> <a href="ApplyView_8h_source.html#l00031">ApplyView.h:31</a></div></div>
<div class="ttc" id="anamespaceripple_html_a8ca9b43bfc508a3fdbc296fb926320ce"><div class="ttname"><a href="namespaceripple.html#a8ca9b43bfc508a3fdbc296fb926320ce">ripple::parityRate</a></div><div class="ttdeci">const Rate parityRate(QUALITY_ONE)</div><div class="ttdoc">A transfer rate signifying a 1:1 exchange.</div><div class="ttdef"><b>Definition:</b> <a href="Rate_8h_source.html#l00094">Rate.h:94</a></div></div>
<div class="ttc" id="astructripple_1_1ReadView_1_1sles__type_html_a7ab1d557a2540b693a7588a701a73825"><div class="ttname"><a href="structripple_1_1ReadView_1_1sles__type.html#a7ab1d557a2540b693a7588a701a73825">ripple::ReadView::sles_type::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8cpp_source.html#l00132">ReadView.cpp:132</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1jtx_1_1Env_html_a90fecf3c0f6cdc1c40761e19917bf65a"><div class="ttname"><a href="classripple_1_1test_1_1jtx_1_1Env.html#a90fecf3c0f6cdc1c40761e19917bf65a">ripple::test::jtx::Env::trust</a></div><div class="ttdeci">void trust(STAmount const &amp;amount, Account const &amp;account)</div><div class="ttdoc">Establish trust lines.</div><div class="ttdef"><b>Definition:</b> <a href="Env_8cpp_source.html#l00250">Env.cpp:250</a></div></div>
<div class="ttc" id="anamespaceripple_html_a356c68147333a9a48a344718038576d9"><div class="ttname"><a href="namespaceripple.html#a356c68147333a9a48a344718038576d9">ripple::uint256</a></div><div class="ttdeci">base_uint&lt; 256 &gt; uint256</div><div class="ttdef"><b>Definition:</b> <a href="base__uint_8h_source.html#l00493">base_uint.h:493</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_ac4dc08fbd79cdefb231b58455da628dd"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#ac4dc08fbd79cdefb231b58455da628dd">ripple::test::View_test::run</a></div><div class="ttdeci">void run() override</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00803">View_test.cpp:803</a></div></div>
<div class="ttc" id="apush_back_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector/push_back.html">std::vector::push_back</a></div><div class="ttdeci">T push_back(T... args)</div></div>
<div class="ttc" id="astructripple_1_1Keylet_html_a482983062843a8682fcea76a309c73db"><div class="ttname"><a href="structripple_1_1Keylet.html#a482983062843a8682fcea76a309c73db">ripple::Keylet::key</a></div><div class="ttdeci">uint256 key</div><div class="ttdef"><b>Definition:</b> <a href="Keylet_8h_source.html#l00041">Keylet.h:41</a></div></div>
<div class="ttc" id="aclassripple_1_1base__uint_html"><div class="ttname"><a href="classripple_1_1base__uint.html">ripple::base_uint&lt; 256 &gt;</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_a876d0b6d69f1e6ce68f8fa1a804e4174"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#a876d0b6d69f1e6ce68f8fa1a804e4174">ripple::test::View_test::testRegressions</a></div><div class="ttdeci">void testRegressions()</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00763">View_test.cpp:763</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html"><div class="ttname"><a href="classripple_1_1Ledger.html">ripple::Ledger</a></div><div class="ttdoc">Holds a ledger.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00077">Ledger.h:77</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_a0e8e994b5cdd90ed5c9ceb881902c775"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#a0e8e994b5cdd90ed5c9ceb881902c775">ripple::test::View_test::testContext</a></div><div class="ttdeci">void testContext()</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00326">View_test.cpp:326</a></div></div>
<div class="ttc" id="aclassripple_1_1Config_html"><div class="ttname"><a href="classripple_1_1Config.html">ripple::Config</a></div><div class="ttdef"><b>Definition:</b> <a href="Config_8h_source.html#l00067">Config.h:67</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_afbe68de7cc052b29ccd3006effa3ab1a"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#afbe68de7cc052b29ccd3006effa3ab1a">ripple::test::View_test::sle</a></div><div class="ttdeci">static std::shared_ptr&lt; SLE &gt; sle(std::uint64_t id, std::uint32_t seq=1)</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00045">View_test.cpp:45</a></div></div>
<div class="ttc" id="aclassripple_1_1OpenView_html_ad2a95c6fd9303d94164d55530cc1df39"><div class="ttname"><a href="classripple_1_1OpenView.html#ad2a95c6fd9303d94164d55530cc1df39">ripple::OpenView::rawReplace</a></div><div class="ttdeci">void rawReplace(std::shared_ptr&lt; SLE &gt; const &amp;sle) override</div><div class="ttdoc">Unconditionally replace a state item.</div><div class="ttdef"><b>Definition:</b> <a href="OpenView_8cpp_source.html#l00222">OpenView.cpp:222</a></div></div>
<div class="ttc" id="aclassripple_1_1Sandbox_html"><div class="ttname"><a href="classripple_1_1Sandbox.html">ripple::Sandbox</a></div><div class="ttdoc">Discardable, editable view to a ledger.</div><div class="ttdef"><b>Definition:</b> <a href="Sandbox_8h_source.html#l00034">Sandbox.h:34</a></div></div>
<div class="ttc" id="anamespaceripple_1_1test_1_1jtx_html_a50cacef3867fc01273aa9c29231f9a7c"><div class="ttname"><a href="namespaceripple_1_1test_1_1jtx.html#a50cacef3867fc01273aa9c29231f9a7c">ripple::test::jtx::fset</a></div><div class="ttdeci">Json::Value fset(Account const &amp;account, std::uint32_t on, std::uint32_t off=0)</div><div class="ttdoc">Add and/or remove flag.</div><div class="ttdef"><b>Definition:</b> <a href="flags_8cpp_source.html#l00028">flags.cpp:28</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_a0ec9402f8cd5a506db6de1828be69191"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#a0ec9402f8cd5a506db6de1828be69191">ripple::test::View_test::wipe</a></div><div class="ttdeci">static void wipe(Ledger &amp;ledger)</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00088">View_test.cpp:88</a></div></div>
<div class="ttc" id="anamespaceripple_html_a21696ba0d0fac348f88f1b9da51091b0"><div class="ttname"><a href="namespaceripple.html#a21696ba0d0fac348f88f1b9da51091b0">ripple::xrpAccount</a></div><div class="ttdeci">AccountID const  &amp; xrpAccount()</div><div class="ttdoc">Compute AccountID from public key.</div><div class="ttdef"><b>Definition:</b> <a href="AccountID_8cpp_source.html#l00143">AccountID.cpp:143</a></div></div>
<div class="ttc" id="aclassbeast_1_1Journal_html_a49b0713e65bb8e2c51b76fbf16252afe"><div class="ttname"><a href="classbeast_1_1Journal.html#a49b0713e65bb8e2c51b76fbf16252afe">beast::Journal::error</a></div><div class="ttdeci">Stream error() const</div><div class="ttdef"><b>Definition:</b> <a href="Journal_8h_source.html#l00333">Journal.h:333</a></div></div>
<div class="ttc" id="atime_point_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/chrono/time_point.html">std::chrono::time_point</a></div></div>
<div class="ttc" id="aclassripple_1_1ReadView_html_ac1d377c35a8332d069b09be8f4008dec"><div class="ttname"><a href="classripple_1_1ReadView.html#ac1d377c35a8332d069b09be8f4008dec">ripple::ReadView::exists</a></div><div class="ttdeci">virtual bool exists(Keylet const &amp;k) const =0</div><div class="ttdoc">Determine if a state item exists.</div></div>
<div class="ttc" id="aclassripple_1_1ReadView_html_afd166083a5c60300819b4385d92e51cb"><div class="ttname"><a href="classripple_1_1ReadView.html#afd166083a5c60300819b4385d92e51cb">ripple::ReadView::sles</a></div><div class="ttdeci">sles_type sles</div><div class="ttdoc">Iterable range of ledger state items.</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00383">ReadView.h:383</a></div></div>
<div class="ttc" id="aclassripple_1_1TimeKeeper_html_a106491f0751b8c2c75978a4d1f7aa0e6"><div class="ttname"><a href="classripple_1_1TimeKeeper.html#a106491f0751b8c2c75978a4d1f7aa0e6">ripple::TimeKeeper::closeTime</a></div><div class="ttdeci">virtual time_point closeTime() const =0</div><div class="ttdoc">Returns the close time, in network time.</div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_a6d746e59eef5e7c4144b2065ae6f7622"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#a6d746e59eef5e7c4144b2065ae6f7622">ripple::test::View_test::wipe</a></div><div class="ttdeci">static void wipe(OpenLedger &amp;openLedger)</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00069">View_test.cpp:69</a></div></div>
<div class="ttc" id="aclassbeast_1_1Journal_html"><div class="ttname"><a href="classbeast_1_1Journal.html">beast::Journal</a></div><div class="ttdoc">A generic endpoint for log messages.</div><div class="ttdef"><b>Definition:</b> <a href="Journal_8h_source.html#l00058">Journal.h:58</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1GetAmendments__test_html_aad102a9976dc4ac9f7b2c3d75c6c343a"><div class="ttname"><a href="classripple_1_1test_1_1GetAmendments__test.html#aad102a9976dc4ac9f7b2c3d75c6c343a">ripple::test::GetAmendments_test::run</a></div><div class="ttdeci">void run() override</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00868">View_test.cpp:868</a></div></div>
<div class="ttc" id="ainteger_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint64_t</a></div></div>
<div class="ttc" id="anamespaceripple_html_a2ee664f6676eec21e5459ab18eddcfbb"><div class="ttname"><a href="namespaceripple.html#a2ee664f6676eec21e5459ab18eddcfbb">ripple::tfSetFreeze</a></div><div class="ttdeci">const std::uint32_t tfSetFreeze</div><div class="ttdef"><b>Definition:</b> <a href="TxFlags_8h_source.html#l00094">TxFlags.h:94</a></div></div>
<div class="ttc" id="anamespaceripple_1_1keylet_html_a78921721302f172696ebc5c64e279763"><div class="ttname"><a href="namespaceripple_1_1keylet.html#a78921721302f172696ebc5c64e279763">ripple::keylet::unchecked</a></div><div class="ttdeci">Keylet unchecked(uint256 const &amp;key) noexcept</div><div class="ttdoc">Any ledger entry.</div><div class="ttdef"><b>Definition:</b> <a href="Indexes_8cpp_source.html#l00279">Indexes.cpp:279</a></div></div>
<div class="ttc" id="anamespaceripple_1_1test_1_1jtx_html_a18cde110bb3ad7dce97ac11a4b251d0e"><div class="ttname"><a href="namespaceripple_1_1test_1_1jtx.html#a18cde110bb3ad7dce97ac11a4b251d0e">ripple::test::jtx::fclear</a></div><div class="ttdeci">Json::Value fclear(Account const &amp;account, std::uint32_t off)</div><div class="ttdoc">Remove account flag.</div><div class="ttdef"><b>Definition:</b> <a href="flags_8h_source.html#l00040">flags.h:40</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_ad7d00b70c5c289d33d40aefeb9af5beb"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#ad7d00b70c5c289d33d40aefeb9af5beb">ripple::test::View_test::testMeta</a></div><div class="ttdeci">void testMeta()</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00166">View_test.cpp:166</a></div></div>
<div class="ttc" id="aclassripple_1_1ReadView_html_a3351e0244f921234d5ba005a07ddf539"><div class="ttname"><a href="classripple_1_1ReadView.html#a3351e0244f921234d5ba005a07ddf539">ripple::ReadView::read</a></div><div class="ttdeci">virtual std::shared_ptr&lt; SLE const  &gt; read(Keylet const &amp;k) const =0</div><div class="ttdoc">Return the state item associated with a key.</div></div>
<div class="ttc" id="anamespaceripple_html_ae93a0ce909950194e6f9aaed7579ea74"><div class="ttname"><a href="namespaceripple.html#ae93a0ce909950194e6f9aaed7579ea74">ripple::areCompatible</a></div><div class="ttdeci">bool areCompatible(ReadView const &amp;validLedger, ReadView const &amp;testLedger, beast::Journal::Stream &amp;s, const char *reason)</div><div class="ttdoc">Return false if the test ledger is provably incompatible with the valid ledger, that is,...</div><div class="ttdef"><b>Definition:</b> <a href="View_8cpp_source.html#l00358">View.cpp:358</a></div></div>
<div class="ttc" id="aclassripple_1_1OpenLedger_html_a88144aac5696b3f33eccfaaed0aeb8ba"><div class="ttname"><a href="classripple_1_1OpenLedger.html#a88144aac5696b3f33eccfaaed0aeb8ba">ripple::OpenLedger::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Returns true if there are no transactions.</div><div class="ttdef"><b>Definition:</b> <a href="OpenLedger_8cpp_source.html#l00043">OpenLedger.cpp:43</a></div></div>
<div class="ttc" id="anamespaceripple_html_a15bb971c7e554fc3df218aba54c33fcc"><div class="ttname"><a href="namespaceripple.html#a15bb971c7e554fc3df218aba54c33fcc">ripple::accountFunds</a></div><div class="ttdeci">STAmount accountFunds(ReadView const &amp;view, AccountID const &amp;id, STAmount const &amp;saDefault, FreezeHandling freezeHandling, beast::Journal j)</div><div class="ttdef"><b>Definition:</b> <a href="View_8cpp_source.html#l00136">View.cpp:136</a></div></div>
<div class="ttc" id="aclassripple_1_1OpenLedger_html"><div class="ttname"><a href="classripple_1_1OpenLedger.html">ripple::OpenLedger</a></div><div class="ttdoc">Represents the open ledger.</div><div class="ttdef"><b>Definition:</b> <a href="OpenLedger_8h_source.html#l00049">OpenLedger.h:49</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1jtx_1_1fee_html"><div class="ttname"><a href="classripple_1_1test_1_1jtx_1_1fee.html">ripple::test::jtx::fee</a></div><div class="ttdoc">Set the fee on a JTx.</div><div class="ttdef"><b>Definition:</b> <a href="fee_8h_source.html#l00034">fee.h:34</a></div></div>
<div class="ttc" id="anamespaceripple_html_ad2487abbcc1a5d6064b72144b461df6ead993a03ae0b72db5c62a616b69eaccff"><div class="ttname"><a href="namespaceripple.html#ad2487abbcc1a5d6064b72144b461df6ead993a03ae0b72db5c62a616b69eaccff">ripple::tapRETRY</a></div><div class="ttdeci">@ tapRETRY</div><div class="ttdef"><b>Definition:</b> <a href="ApplyView_8h_source.html#l00039">ApplyView.h:39</a></div></div>
<div class="ttc" id="aclassripple_1_1OpenView_html_ad8795d23968108dca84420d2d25e1dd7"><div class="ttname"><a href="classripple_1_1OpenView.html#ad8795d23968108dca84420d2d25e1dd7">ripple::OpenView::rawInsert</a></div><div class="ttdeci">void rawInsert(std::shared_ptr&lt; SLE &gt; const &amp;sle) override</div><div class="ttdoc">Unconditionally insert a state item.</div><div class="ttdef"><b>Definition:</b> <a href="OpenView_8cpp_source.html#l00216">OpenView.cpp:216</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a85c52f6c826b0b32bd773e1d1cfbdb78"><div class="ttname"><a href="classripple_1_1Ledger.html#a85c52f6c826b0b32bd773e1d1cfbdb78">ripple::Ledger::read</a></div><div class="ttdeci">std::shared_ptr&lt; SLE const  &gt; read(Keylet const &amp;k) const override</div><div class="ttdoc">Return the state item associated with a key.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00407">Ledger.cpp:407</a></div></div>
<div class="ttc" id="aclassripple_1_1detail_1_1ApplyViewBase_html_a669490ced7bb2cab3a6cc704bc7286df"><div class="ttname"><a href="classripple_1_1detail_1_1ApplyViewBase.html#a669490ced7bb2cab3a6cc704bc7286df">ripple::detail::ApplyViewBase::insert</a></div><div class="ttdeci">void insert(std::shared_ptr&lt; SLE &gt; const &amp;sle) override</div><div class="ttdoc">Insert a new state SLE.</div><div class="ttdef"><b>Definition:</b> <a href="ApplyViewBase_8cpp_source.html#l00141">ApplyViewBase.cpp:141</a></div></div>
<div class="ttc" id="aclassripple_1_1detail_1_1ApplyViewBase_html_a165c96d3bf59c98b608ffabcf2f70276"><div class="ttname"><a href="classripple_1_1detail_1_1ApplyViewBase.html#a165c96d3bf59c98b608ffabcf2f70276">ripple::detail::ApplyViewBase::erase</a></div><div class="ttdeci">void erase(std::shared_ptr&lt; SLE &gt; const &amp;sle) override</div><div class="ttdoc">Remove a peeked SLE.</div><div class="ttdef"><b>Definition:</b> <a href="ApplyViewBase_8cpp_source.html#l00135">ApplyViewBase.cpp:135</a></div></div>
<div class="ttc" id="astructripple_1_1test_1_1jtx_1_1seq_html"><div class="ttname"><a href="structripple_1_1test_1_1jtx_1_1seq.html">ripple::test::jtx::seq</a></div><div class="ttdoc">Set the sequence number on a JTx.</div><div class="ttdef"><b>Definition:</b> <a href="seq_8h_source.html#l00032">seq.h:32</a></div></div>
<div class="ttc" id="aclassripple_1_1detail_1_1ApplyViewBase_html_ad615aed650814602031c446241bbca10"><div class="ttname"><a href="classripple_1_1detail_1_1ApplyViewBase.html#ad615aed650814602031c446241bbca10">ripple::detail::ApplyViewBase::flags</a></div><div class="ttdeci">ApplyFlags flags() const override</div><div class="ttdoc">Returns the tx apply flags.</div><div class="ttdef"><b>Definition:</b> <a href="ApplyViewBase_8cpp_source.html#l00123">ApplyViewBase.cpp:123</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_a44de65bb5f829206aa5decfe308e0a37"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#a44de65bb5f829206aa5decfe308e0a37">ripple::test::View_test::copy</a></div><div class="ttdeci">static std::shared_ptr&lt; std::remove_const_t&lt; T &gt; &gt; copy(std::shared_ptr&lt; T &gt; const &amp;sp)</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00124">View_test.cpp:124</a></div></div>
<div class="ttc" id="aclassripple_1_1ReadView_html"><div class="ttname"><a href="classripple_1_1ReadView.html">ripple::ReadView</a></div><div class="ttdoc">A view into a ledger.</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00188">ReadView.h:188</a></div></div>
<div class="ttc" id="anamespaceripple_html"><div class="ttname"><a href="namespaceripple.html">ripple</a></div><div class="ttdoc">Use hash_* containers for keys that do not need a cryptographically secure hashing algorithm.</div><div class="ttdef"><b>Definition:</b> <a href="RCLCensorshipDetector_8h_source.html#l00029">RCLCensorshipDetector.h:29</a></div></div>
<div class="ttc" id="anamespaceripple_1_1test_1_1jtx_html_a7816b23daf9b325ea1f88cc121a53d05"><div class="ttname"><a href="namespaceripple_1_1test_1_1jtx.html#a7816b23daf9b325ea1f88cc121a53d05">ripple::test::jtx::pay</a></div><div class="ttdeci">Json::Value pay(Account const &amp;account, Account const &amp;to, AnyAmount amount)</div><div class="ttdoc">Create a payment.</div><div class="ttdef"><b>Definition:</b> <a href="pay_8cpp_source.html#l00029">pay.cpp:29</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_a4af3a487d399abe48fef4e8dff23ac99"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#a4af3a487d399abe48fef4e8dff23ac99">ripple::test::View_test::testLedger</a></div><div class="ttdeci">void testLedger()</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00131">View_test.cpp:131</a></div></div>
<div class="ttc" id="aclassripple_1_1ReadView_html_ac284afc905c482953c35c61b459fd85b"><div class="ttname"><a href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">ripple::ReadView::seq</a></div><div class="ttdeci">LedgerIndex seq() const</div><div class="ttdoc">Returns the sequence number of the base ledger.</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00256">ReadView.h:256</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1jtx_1_1Env_html_a2c5dcd5bbad5c5b767ff713b6f7cb1ed"><div class="ttname"><a href="classripple_1_1test_1_1jtx_1_1Env.html#a2c5dcd5bbad5c5b767ff713b6f7cb1ed">ripple::test::jtx::Env::close</a></div><div class="ttdeci">bool close(NetClock::time_point closeTime, boost::optional&lt; std::chrono::milliseconds &gt; consensusDelay=boost::none)</div><div class="ttdoc">Close and advance the ledger.</div><div class="ttdef"><b>Definition:</b> <a href="Env_8cpp_source.html#l00121">Env.cpp:121</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1jtx_1_1Env_html_ae2349266cb09d1f1c3de06606ebdf9e2"><div class="ttname"><a href="classripple_1_1test_1_1jtx_1_1Env.html#ae2349266cb09d1f1c3de06606ebdf9e2">ripple::test::jtx::Env::fund</a></div><div class="ttdeci">void fund(bool setDefaultRipple, STAmount const &amp;amount, Account const &amp;account)</div><div class="ttdef"><b>Definition:</b> <a href="Env_8cpp_source.html#l00219">Env.cpp:219</a></div></div>
<div class="ttc" id="anamespaceripple_html_a2995be43488ad73c05c5541036d99d5a"><div class="ttname"><a href="namespaceripple.html#a2995be43488ad73c05c5541036d99d5a">ripple::create_genesis</a></div><div class="ttdeci">const create_genesis_t create_genesis</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00057">Ledger.cpp:57</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html">ripple::test::View_test</a></div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00034">View_test.cpp:34</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a2f3afbe3023c3456963a20b30a1bbdfe"><div class="ttname"><a href="classripple_1_1Ledger.html#a2f3afbe3023c3456963a20b30a1bbdfe">ripple::Ledger::succ</a></div><div class="ttdeci">boost::optional&lt; uint256 &gt; succ(uint256 const &amp;key, boost::optional&lt; uint256 &gt; const &amp;last=boost::none) const override</div><div class="ttdoc">Return the key of the next state item.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00396">Ledger.cpp:396</a></div></div>
<div class="ttc" id="anamespaceripple_html_a17a9a9b903b66e49f5413d82ce79f085a91e3c4f8089025c7ecf66dd62b822d90"><div class="ttname"><a href="namespaceripple.html#a17a9a9b903b66e49f5413d82ce79f085a91e3c4f8089025c7ecf66dd62b822d90">ripple::fhIGNORE_FREEZE</a></div><div class="ttdeci">@ fhIGNORE_FREEZE</div><div class="ttdef"><b>Definition:</b> <a href="View_8h_source.html#l00053">View.h:53</a></div></div>
<div class="ttc" id="aclassripple_1_1OpenView_html_ad31c6cb5856530ac7d72bf01fe780d43"><div class="ttname"><a href="classripple_1_1OpenView.html#ad31c6cb5856530ac7d72bf01fe780d43">ripple::OpenView::read</a></div><div class="ttdeci">std::shared_ptr&lt; SLE const  &gt; read(Keylet const &amp;k) const override</div><div class="ttdoc">Return the state item associated with a key.</div><div class="ttdef"><b>Definition:</b> <a href="OpenView_8cpp_source.html#l00148">OpenView.cpp:148</a></div></div>
<div class="ttc" id="aclassripple_1_1detail_1_1ApplyViewBase_html_a4609256b709351fe56d7039441502512"><div class="ttname"><a href="classripple_1_1detail_1_1ApplyViewBase.html#a4609256b709351fe56d7039441502512">ripple::detail::ApplyViewBase::read</a></div><div class="ttdeci">std::shared_ptr&lt; SLE const  &gt; read(Keylet const &amp;k) const override</div><div class="ttdoc">Return the state item associated with a key.</div><div class="ttdef"><b>Definition:</b> <a href="ApplyViewBase_8cpp_source.html#l00072">ApplyViewBase.cpp:72</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1jtx_1_1Account_html"><div class="ttname"><a href="classripple_1_1test_1_1jtx_1_1Account.html">ripple::test::jtx::Account</a></div><div class="ttdoc">Immutable cryptographic account descriptor.</div><div class="ttdef"><b>Definition:</b> <a href="Account_8h_source.html#l00037">Account.h:37</a></div></div>
<div class="ttc" id="aclassripple_1_1detail_1_1ApplyViewBase_html_afe88196d7aec85f2af00d7cd0b1a28c3"><div class="ttname"><a href="classripple_1_1detail_1_1ApplyViewBase.html#afe88196d7aec85f2af00d7cd0b1a28c3">ripple::detail::ApplyViewBase::peek</a></div><div class="ttdeci">std::shared_ptr&lt; SLE &gt; peek(Keylet const &amp;k) override</div><div class="ttdoc">Prepare to modify the SLE associated with key.</div><div class="ttdef"><b>Definition:</b> <a href="ApplyViewBase_8cpp_source.html#l00129">ApplyViewBase.cpp:129</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1GetAmendments__test_html_a07fe3d47cbade85144ebe7f90bf2dad1"><div class="ttname"><a href="classripple_1_1test_1_1GetAmendments__test.html#a07fe3d47cbade85144ebe7f90bf2dad1">ripple::test::GetAmendments_test::testGetAmendments</a></div><div class="ttdeci">void testGetAmendments()</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00824">View_test.cpp:824</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_a212be5fd7a3dbc45131d1d3bdc4b307a"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#a212be5fd7a3dbc45131d1d3bdc4b307a">ripple::test::View_test::testAreCompatible</a></div><div class="ttdeci">void testAreCompatible()</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00705">View_test.cpp:705</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_ab548fbc346788e353914d76482acfbc6"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#ab548fbc346788e353914d76482acfbc6">ripple::test::View_test::testStacked</a></div><div class="ttdeci">void testStacked()</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00261">View_test.cpp:261</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_a302bc0969a99610f578630eeca5fa754"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#a302bc0969a99610f578630eeca5fa754">ripple::test::View_test::k</a></div><div class="ttdeci">static Keylet k(std::uint64_t id)</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00038">View_test.cpp:38</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_a5acb7e933c87c1312e227961646f7d62"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#a5acb7e933c87c1312e227961646f7d62">ripple::test::View_test::list</a></div><div class="ttdeci">static std::vector&lt; uint256 &gt; list(Args... args)</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00382">View_test.cpp:382</a></div></div>
<div class="ttc" id="anamespaceripple_html_af6e0324b257fc9992b83ecf827c2a07bac03405d2da6d19e17f321a6b7f7a412e"><div class="ttname"><a href="namespaceripple.html#af6e0324b257fc9992b83ecf827c2a07bac03405d2da6d19e17f321a6b7f7a412e">ripple::ltACCOUNT_ROOT</a></div><div class="ttdeci">@ ltACCOUNT_ROOT</div><div class="ttdef"><b>Definition:</b> <a href="LedgerFormats_8h_source.html#l00053">LedgerFormats.h:53</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_afc4bd1a64899a21b283a95b7aa494424"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#afc4bd1a64899a21b283a95b7aa494424">ripple::test::View_test::succ</a></div><div class="ttdeci">void succ(ReadView const &amp;v, std::uint32_t id, boost::optional&lt; std::uint32_t &gt; answer)</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00105">View_test.cpp:105</a></div></div>
<div class="ttc" id="aclassripple_1_1ReadView_html_a2b1718fdf4ffd63d8fe7650f66114804"><div class="ttname"><a href="classripple_1_1ReadView.html#a2b1718fdf4ffd63d8fe7650f66114804">ripple::ReadView::succ</a></div><div class="ttdeci">virtual boost::optional&lt; key_type &gt; succ(key_type const &amp;key, boost::optional&lt; key_type &gt; const &amp;last=boost::none) const =0</div><div class="ttdoc">Return the key of the next state item.</div></div>
<div class="ttc" id="atype_traits_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/header/type_traits.html">type_traits</a></div></div>
<div class="ttc" id="aclassripple_1_1OpenLedger_html_a05ada40b015a008ffd28668b8daf5808"><div class="ttname"><a href="classripple_1_1OpenLedger.html#a05ada40b015a008ffd28668b8daf5808">ripple::OpenLedger::modify</a></div><div class="ttdeci">bool modify(modify_type const &amp;f)</div><div class="ttdoc">Modify the open ledger.</div><div class="ttdef"><b>Definition:</b> <a href="OpenLedger_8cpp_source.html#l00057">OpenLedger.cpp:57</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1jtx_1_1Env_html_ace0420a6e752f5dc5400df6f2097647e"><div class="ttname"><a href="classripple_1_1test_1_1jtx_1_1Env.html#ace0420a6e752f5dc5400df6f2097647e">ripple::test::jtx::Env::current</a></div><div class="ttdeci">std::shared_ptr&lt; OpenView const  &gt; current() const</div><div class="ttdoc">Returns the current ledger.</div><div class="ttdef"><b>Definition:</b> <a href="Env_8h_source.html#l00299">Env.h:299</a></div></div>
<div class="ttc" id="anamespaceripple_html_a91af9326e7f471001066b6b59f24599c"><div class="ttname"><a href="namespaceripple.html#a91af9326e7f471001066b6b59f24599c">ripple::xrpCurrency</a></div><div class="ttdeci">Currency const  &amp; xrpCurrency()</div><div class="ttdoc">XRP currency.</div><div class="ttdef"><b>Definition:</b> <a href="UintTypes_8cpp_source.html#l00121">UintTypes.cpp:121</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1jtx_1_1Env_html"><div class="ttname"><a href="classripple_1_1test_1_1jtx_1_1Env.html">ripple::test::jtx::Env</a></div><div class="ttdoc">A transaction testing environment.</div><div class="ttdef"><b>Definition:</b> <a href="Env_8h_source.html#l00115">Env.h:115</a></div></div>
<div class="ttc" id="aclassripple_1_1detail_1_1ApplyViewBase_html_aacd0fa84b0681ca34739a9fddde754a0"><div class="ttname"><a href="classripple_1_1detail_1_1ApplyViewBase.html#aacd0fa84b0681ca34739a9fddde754a0">ripple::detail::ApplyViewBase::rawInsert</a></div><div class="ttdeci">void rawInsert(std::shared_ptr&lt; SLE &gt; const &amp;sle) override</div><div class="ttdoc">Unconditionally insert a state item.</div><div class="ttdef"><b>Definition:</b> <a href="ApplyViewBase_8cpp_source.html#l00161">ApplyViewBase.cpp:161</a></div></div>
<div class="ttc" id="anamespaceripple_html_a886ed36db831a964fc5f66ebbb4fe3d0"><div class="ttname"><a href="namespaceripple.html#a886ed36db831a964fc5f66ebbb4fe3d0">ripple::open</a></div><div class="ttdeci">void open(soci::session &amp;s, BasicConfig const &amp;config, std::string const &amp;dbName)</div><div class="ttdoc">Open a soci session.</div><div class="ttdef"><b>Definition:</b> <a href="SociDB_8cpp_source.html#l00099">SociDB.cpp:99</a></div></div>
<div class="ttc" id="aclassripple_1_1OpenView_html_a111df7decb50a3a2cb279b12acb5fc55"><div class="ttname"><a href="classripple_1_1OpenView.html#a111df7decb50a3a2cb279b12acb5fc55">ripple::OpenView::succ</a></div><div class="ttdeci">boost::optional&lt; key_type &gt; succ(key_type const &amp;key, boost::optional&lt; key_type &gt; const &amp;last=boost::none) const override</div><div class="ttdoc">Return the key of the next state item.</div><div class="ttdef"><b>Definition:</b> <a href="OpenView_8cpp_source.html#l00141">OpenView.cpp:141</a></div></div>
<div class="ttc" id="anamespaceripple_1_1test_1_1jtx_html_a8e8d814b8820ce0b6979abde0d6a2618"><div class="ttname"><a href="namespaceripple_1_1test_1_1jtx.html#a8e8d814b8820ce0b6979abde0d6a2618">ripple::test::jtx::rate</a></div><div class="ttdeci">Json::Value rate(Account const &amp;account, double multiplier)</div><div class="ttdoc">Set a transfer rate.</div><div class="ttdef"><b>Definition:</b> <a href="rate_8cpp_source.html#l00030">rate.cpp:30</a></div></div>
<div class="ttc" id="anamespacestd_1_1chrono_html"><div class="ttname"><a href="http://en.cppreference.com/w/namespacestd_1_1chrono.html">std::chrono</a></div></div>
<div class="ttc" id="aclassripple_1_1test_1_1View__test_html_ace1e1e1996ead65ddf4206173950df2c"><div class="ttname"><a href="classripple_1_1test_1_1View__test.html#ace1e1e1996ead65ddf4206173950df2c">ripple::test::View_test::seq</a></div><div class="ttdeci">static std::uint32_t seq(std::shared_ptr&lt; T &gt; const &amp;le)</div><div class="ttdef"><b>Definition:</b> <a href="View__test_8cpp_source.html#l00055">View_test.cpp:55</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
